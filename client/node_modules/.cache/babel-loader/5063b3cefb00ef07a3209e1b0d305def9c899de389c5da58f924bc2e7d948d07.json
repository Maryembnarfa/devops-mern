{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Path, AABB } from '@antv/g';\nimport { path as d3Path } from '@antv/vendor/d3-path';\nimport { sort } from '@antv/vendor/d3-array';\nimport { filter } from '@antv/util';\nimport { select } from '../utils/selection';\nimport { mapObject } from '../utils/array';\nimport { ELEMENT_CLASS_NAME, PLOT_CLASS_NAME } from '../runtime';\nimport { isOrdinalScale } from '../utils/scale';\nimport { rect } from '../shape/interval/color';\nimport { isPolar, isTranspose } from '../utils/coordinate';\nimport { getStyle } from '../utils/style';\nimport { reorder } from '../shape/utils';\nimport { angle, angleBetween, sub } from '../utils/vector';\n/**\n * Given root of chart returns elements to be manipulated\n */\nexport function selectG2Elements(root) {\n  return select(root).selectAll(`.${ELEMENT_CLASS_NAME}`).nodes().filter(d => !d.__removed__);\n}\nexport function selectFacetG2Elements(target, viewInstances) {\n  return selectFacetViews(target, viewInstances).flatMap(_ref => {\n    let {\n      container\n    } = _ref;\n    return selectG2Elements(container);\n  });\n}\nexport function selectFacetViews(target, viewInstances) {\n  return viewInstances.filter(d => d !== target && d.options.parentKey === target.options.key);\n}\nexport function selectPlotArea(root) {\n  return select(root).select(`.${PLOT_CLASS_NAME}`).node();\n}\nexport function bboxOf(element) {\n  // The geometry bounds of a group is empty, so return the render bounds.\n  if (element.tagName === 'g') return element.getRenderBounds();\n  // Compute the geometry bounds related to the parent.\n  const bounds = element.getGeometryBounds();\n  const aabb = new AABB();\n  aabb.setFromTransformedAABB(bounds, element.getWorldTransform());\n  return aabb;\n}\nexport function mousePosition(target, event) {\n  const {\n    offsetX,\n    offsetY\n  } = event;\n  const bbox = bboxOf(target);\n  const {\n    min: [x, y],\n    max: [x1, y1]\n  } = bbox;\n  const isOutX = offsetX < x || offsetX > x1;\n  const isOutY = offsetY < y || offsetY > y1;\n  if (isOutX || isOutY) return null;\n  return [offsetX - x, offsetY - y];\n}\n/**\n * @todo Pass bbox rather than calc it here.\n */\nexport function brushMousePosition(target, event) {\n  const {\n    offsetX,\n    offsetY\n  } = event;\n  const [x, y, x1, y1] = boundsOfBrushArea(target);\n  return [Math.min(x1, Math.max(x, offsetX)) - x, Math.min(y1, Math.max(y, offsetY)) - y];\n}\nexport function boundsOfBrushArea(target) {\n  // Calc bbox after clipping.\n  const bbox = target.getRenderBounds();\n  const {\n    min: [x0, y0],\n    max: [x1, y1]\n  } = bbox;\n  return [x0, y0, x1, y1];\n}\nexport function createColorKey(view) {\n  return element => element.__data__.color;\n}\nexport function createXKey(view) {\n  return element => element.__data__.x;\n}\nexport function createDatumof(view) {\n  const views = Array.isArray(view) ? view : [view];\n  const keyData = new Map(views.flatMap(view => {\n    const marks = Array.from(view.markState.keys());\n    return marks.map(mark => [keyed(view.key, mark.key), mark.data]);\n  }));\n  return element => {\n    const {\n      index,\n      markKey,\n      viewKey\n    } = element.__data__;\n    const data = keyData.get(keyed(viewKey, markKey));\n    return data[index];\n  };\n}\n/**\n * A state manager for G2Element.\n * The keys for each state's style start with the state name.\n * { selectedFill, selectedStroke } is for selected state.\n * { unselectedFill, unselectedStroke } is for unselected state.\n */\nexport function useState(style) {\n  let valueof = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (d, element) => d;\n  let setAttribute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (element, key, v) => element.setAttribute(key, v);\n  const STATES = '__states__';\n  const ORIGINAL = '__ordinal__';\n  // Mix style for each state and apply it to element.\n  const updateState = element => {\n    const {\n      [STATES]: states = [],\n      [ORIGINAL]: original = {}\n    } = element;\n    const stateStyle = states.reduce((mixedStyle, state) => Object.assign(Object.assign({}, mixedStyle), style[state]), original);\n    if (Object.keys(stateStyle).length === 0) return;\n    for (const [key, value] of Object.entries(stateStyle)) {\n      const currentValue = getStyle(element, key);\n      const v = valueof(value, element);\n      setAttribute(element, key, v);\n      // Store the attribute if it does not exist in original.\n      if (!(key in original)) original[key] = currentValue;\n    }\n    element[ORIGINAL] = original;\n  };\n  const initState = element => {\n    if (element[STATES]) return;\n    element[STATES] = [];\n    return;\n  };\n  /**\n   * Set the states and update element.\n   */\n  const setState = function (element) {\n    initState(element);\n    for (var _len = arguments.length, states = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      states[_key - 1] = arguments[_key];\n    }\n    element[STATES] = [...states];\n    updateState(element);\n  };\n  /**\n   * Remove the states and update element.\n   */\n  const removeState = function (element) {\n    initState(element);\n    for (var _len2 = arguments.length, states = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      states[_key2 - 1] = arguments[_key2];\n    }\n    for (const state of states) {\n      const index = element[STATES].indexOf(state);\n      if (index !== -1) {\n        element[STATES].splice(index, 1);\n      }\n    }\n    updateState(element);\n  };\n  const hasState = (element, state) => {\n    initState(element);\n    return element[STATES].indexOf(state) !== -1;\n  };\n  return {\n    setState,\n    removeState,\n    hasState\n  };\n}\nfunction isEmptyObject(obj) {\n  if (obj === undefined) return true;\n  if (typeof obj !== 'object') return false;\n  return Object.keys(obj).length === 0;\n}\n// A function to generate key for mark each view.\nfunction keyed(viewKey, markKey) {\n  return `${viewKey},${markKey}`;\n}\nexport function mergeState(options, states) {\n  // Index state by mark key and view key.\n  const views = Array.isArray(options) ? options : [options];\n  const markState = views.flatMap(view => view.marks.map(mark => [keyed(view.key, mark.key), mark.state]));\n  const state = {};\n  // Update each specified state.\n  for (const descriptor of states) {\n    const [key, defaults] = Array.isArray(descriptor) ? descriptor : [descriptor, {}];\n    // Update each specified mark state.\n    state[key] = markState.reduce((merged, mark) => {\n      // Normalize state.\n      const [markKey, markState = {}] = mark;\n      const selectedState = isEmptyObject(markState[key]) ? defaults : markState[key];\n      // Update each state attribute.\n      for (const [attr, value] of Object.entries(selectedState)) {\n        const oldValue = merged[attr];\n        const newValue = (data, index, array, element) => {\n          const k = keyed(element.__data__.viewKey, element.__data__.markKey);\n          if (markKey !== k) return oldValue === null || oldValue === void 0 ? void 0 : oldValue(data, index, array, element);\n          if (typeof value !== 'function') return value;\n          return value(data, index, array, element);\n        };\n        merged[attr] = newValue;\n      }\n      return merged;\n    }, {});\n  }\n  return state;\n}\n// @todo Support elements from different view.\nexport function createValueof(elements, datum) {\n  const elementIndex = new Map(elements.map((d, i) => [d, i]));\n  const fa = datum ? elements.map(datum) : elements;\n  return (d, e) => {\n    if (typeof d !== 'function') return d;\n    const i = elementIndex.get(e);\n    const fe = datum ? datum(e) : e;\n    return d(fe, i, fa, e);\n  };\n}\nexport function renderLink(_a) {\n  var {\n      link = false,\n      valueof = (d, element) => d,\n      coordinate\n    } = _a,\n    style = __rest(_a, [\"link\", \"valueof\", \"coordinate\"]);\n  const LINK_CLASS_NAME = 'element-link';\n  if (!link) return [() => {}, () => {}];\n  const pointsOf = element => element.__data__.points;\n  const pathPointsOf = (P0, P1) => {\n    const [, p1, p2] = P0;\n    const [p0,,, p3] = P1;\n    const P = [p1, p0, p3, p2];\n    return P;\n  };\n  const append = elements => {\n    var _a;\n    if (elements.length <= 1) return;\n    // Sort elements by normalized x to avoid cross.\n    const sortedElements = sort(elements, (e0, e1) => {\n      const {\n        x: x0\n      } = e0.__data__;\n      const {\n        x: x1\n      } = e1.__data__;\n      const dx = x0 - x1;\n      return dx;\n    });\n    for (let i = 1; i < sortedElements.length; i++) {\n      const p = d3Path();\n      const e0 = sortedElements[i - 1];\n      const e1 = sortedElements[i];\n      const [p0, p1, p2, p3] = pathPointsOf(pointsOf(e0), pointsOf(e1));\n      p.moveTo(...p0);\n      p.lineTo(...p1);\n      p.lineTo(...p2);\n      p.lineTo(...p3);\n      p.closePath();\n      const _b = mapObject(style, d => valueof(d, e0)),\n        {\n          fill = e0.getAttribute('fill')\n        } = _b,\n        rest = __rest(_b, [\"fill\"]);\n      const link = new Path({\n        className: LINK_CLASS_NAME,\n        style: Object.assign({\n          d: p.toString(),\n          fill,\n          zIndex: -2\n        }, rest)\n      });\n      // @ts-ignore\n      (_a = e0.link) === null || _a === void 0 ? void 0 : _a.remove();\n      e0.parentNode.appendChild(link);\n      // @ts-ignore\n      e0.link = link;\n    }\n  };\n  const remove = element => {\n    var _a;\n    (_a = element.link) === null || _a === void 0 ? void 0 : _a.remove();\n    element.link = null;\n  };\n  return [append, remove];\n}\n// Apply translate to mock slice out.\nexport function offsetTransform(element, offset, coordinate) {\n  const append = t => {\n    const {\n      transform\n    } = element.style;\n    return transform ? `${transform} ${t}` : t;\n  };\n  if (isPolar(coordinate)) {\n    const {\n      points\n    } = element.__data__;\n    const [p0, p1] = isTranspose(coordinate) ? reorder(points) : points;\n    const center = coordinate.getCenter();\n    const v0 = sub(p0, center);\n    const v1 = sub(p1, center);\n    const a0 = angle(v0);\n    const da = angleBetween(v0, v1);\n    const amid = a0 + da / 2;\n    const dx = offset * Math.cos(amid);\n    const dy = offset * Math.sin(amid);\n    return append(`translate(${dx}, ${dy})`);\n  }\n  if (isTranspose(coordinate)) return append(`translate(${offset}, 0)`);\n  return append(`translate(0, ${-offset})`);\n}\nexport function renderBackground(_a) {\n  var {\n      document,\n      background,\n      scale,\n      coordinate,\n      valueof\n    } = _a,\n    rest = __rest(_a, [\"document\", \"background\", \"scale\", \"coordinate\", \"valueof\"]);\n  const BACKGROUND_CLASS_NAME = 'element-background';\n  // Don't have background.\n  if (!background) return [() => {}, () => {}];\n  const extentOf = (scale, x, padding) => {\n    const ax = scale.invert(x);\n    const mid = x + scale.getBandWidth(ax) / 2;\n    const half = scale.getStep(ax) / 2;\n    const offset = half * padding;\n    return [mid - half + offset, mid + half - offset];\n  };\n  const sizeXOf = (element, padding) => {\n    const {\n      x: scaleX\n    } = scale;\n    if (!isOrdinalScale(scaleX)) return [0, 1];\n    const {\n      __data__: data\n    } = element;\n    const {\n      x\n    } = data;\n    const [e1, e2] = extentOf(scaleX, x, padding);\n    return [e1, e2];\n  };\n  const sizeYOf = (element, padding) => {\n    const {\n      y: scaleY\n    } = scale;\n    if (!isOrdinalScale(scaleY)) return [0, 1];\n    const {\n      __data__: data\n    } = element;\n    const {\n      y\n    } = data;\n    const [e1, e2] = extentOf(scaleY, y, padding);\n    return [e1, e2];\n  };\n  const bandShapeOf = (element, style) => {\n    const {\n      padding\n    } = style;\n    const [x1, x2] = sizeXOf(element, padding);\n    const [y1, y2] = sizeYOf(element, padding);\n    const points = [[x1, y1], [x2, y1], [x2, y2], [x1, y2]].map(d => coordinate.map(d));\n    const {\n      __data__: data\n    } = element;\n    const {\n      y: dy,\n      y1: dy1\n    } = data;\n    return rect(document, points, {\n      y: dy,\n      y1: dy1\n    }, coordinate, style);\n  };\n  // Shape without ordinal style.\n  // Clone and scale it.\n  const cloneShapeOf = (element, style) => {\n    const {\n        transform = 'scale(1.2, 1.2)',\n        transformOrigin = 'center center',\n        stroke = ''\n      } = style,\n      rest = __rest(style, [\"transform\", \"transformOrigin\", \"stroke\"]);\n    const finalStyle = Object.assign({\n      transform,\n      transformOrigin,\n      stroke\n    }, rest);\n    const shape = element.cloneNode(true);\n    for (const [key, value] of Object.entries(finalStyle)) {\n      shape.style[key] = value;\n    }\n    return shape;\n  };\n  const isOrdinalShape = () => {\n    const {\n      x,\n      y\n    } = scale;\n    return [x, y].some(isOrdinalScale);\n  };\n  const append = element => {\n    if (element.background) element.background.remove();\n    const _a = mapObject(rest, d => valueof(d, element)),\n      {\n        fill = '#CCD6EC',\n        fillOpacity = 0.3,\n        zIndex = -2,\n        padding = 0.001,\n        lineWidth = 0\n      } = _a,\n      style = __rest(_a, [\"fill\", \"fillOpacity\", \"zIndex\", \"padding\", \"lineWidth\"]);\n    const finalStyle = Object.assign(Object.assign({}, style), {\n      fill,\n      fillOpacity,\n      zIndex,\n      padding,\n      lineWidth\n    });\n    const shapeOf = isOrdinalShape() ? bandShapeOf : cloneShapeOf;\n    const shape = shapeOf(element, finalStyle);\n    shape.className = BACKGROUND_CLASS_NAME;\n    element.parentNode.parentNode.appendChild(shape);\n    element.background = shape;\n  };\n  const remove = element => {\n    var _a;\n    (_a = element.background) === null || _a === void 0 ? void 0 : _a.remove();\n    element.background = null;\n  };\n  const is = element => {\n    return element.className === BACKGROUND_CLASS_NAME;\n  };\n  return [append, remove, is];\n}\nexport function setCursor(root, cursor) {\n  // @ts-ignore\n  const canvas = root.getRootNode().defaultView;\n  const dom = canvas.getContextService().getDomElement();\n  if (dom === null || dom === void 0 ? void 0 : dom.style) {\n    root.cursor = dom.style.cursor;\n    dom.style.cursor = cursor;\n  }\n}\nexport function restoreCursor(root) {\n  setCursor(root, root.cursor);\n}\nexport function selectElementByData(elements, data, datum) {\n  return elements.find(d => Object.entries(data).every(_ref2 => {\n    let [key, value] = _ref2;\n    return datum(d)[key] === value;\n  }));\n}\nexport function getPointsR(point, nextPoint) {\n  return Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2));\n}\n// Points create path.\nexport function getPointsPath(points) {\n  let isClose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const path = filter(points, d => !!d).map((d, i) => {\n    return [i === 0 ? 'M' : 'L', ...d];\n  });\n  if (isClose) {\n    path.push(['Z']);\n  }\n  return path;\n}\n// Get element.\nexport function getElements(plot) {\n  return plot.querySelectorAll('.element');\n}\n// Get Theta coordinate round path.\nexport function getThetaPath(center, points) {\n  let isBig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const path = [['M', ...points[1]]];\n  const innerRadius = getPointsR(center, points[1]);\n  const outerRadius = getPointsR(center, points[0]);\n  if (innerRadius === 0) {\n    path.push(['L', ...points[3]], ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]], ['Z']);\n  } else {\n    path.push(['A', innerRadius, innerRadius, 0, isBig, 0, ...points[2]], ['L', ...points[3]], ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]], ['Z']);\n  }\n  return path;\n}\nexport function maybeRoot(node, rootOf) {\n  if (rootOf(node)) return node;\n  let root = node.parent;\n  while (root && !rootOf(root)) root = root.parent;\n  return root;\n}","map":{"version":3,"names":["Path","AABB","path","d3Path","sort","filter","select","mapObject","ELEMENT_CLASS_NAME","PLOT_CLASS_NAME","isOrdinalScale","rect","isPolar","isTranspose","getStyle","reorder","angle","angleBetween","sub","selectG2Elements","root","selectAll","nodes","d","__removed__","selectFacetG2Elements","target","viewInstances","selectFacetViews","flatMap","_ref","container","options","parentKey","key","selectPlotArea","node","bboxOf","element","tagName","getRenderBounds","bounds","getGeometryBounds","aabb","setFromTransformedAABB","getWorldTransform","mousePosition","event","offsetX","offsetY","bbox","min","x","y","max","x1","y1","isOutX","isOutY","brushMousePosition","boundsOfBrushArea","Math","x0","y0","createColorKey","view","__data__","color","createXKey","createDatumof","views","Array","isArray","keyData","Map","marks","from","markState","keys","map","mark","keyed","data","index","markKey","viewKey","get","useState","style","valueof","arguments","length","undefined","setAttribute","v","STATES","ORIGINAL","updateState","states","original","stateStyle","reduce","mixedStyle","state","Object","assign","value","entries","currentValue","initState","setState","_len","_key","removeState","_len2","_key2","indexOf","splice","hasState","isEmptyObject","obj","mergeState","descriptor","defaults","merged","selectedState","attr","oldValue","newValue","array","k","createValueof","elements","datum","elementIndex","i","fa","e","fe","renderLink","_a","link","coordinate","__rest","LINK_CLASS_NAME","pointsOf","points","pathPointsOf","P0","P1","p1","p2","p0","p3","P","append","sortedElements","e0","e1","dx","p","moveTo","lineTo","closePath","_b","fill","getAttribute","rest","className","toString","zIndex","remove","parentNode","appendChild","offsetTransform","offset","t","transform","center","getCenter","v0","v1","a0","da","amid","cos","dy","sin","renderBackground","document","background","scale","BACKGROUND_CLASS_NAME","extentOf","padding","ax","invert","mid","getBandWidth","half","getStep","sizeXOf","scaleX","e2","sizeYOf","scaleY","bandShapeOf","x2","y2","dy1","cloneShapeOf","transformOrigin","stroke","finalStyle","shape","cloneNode","isOrdinalShape","some","fillOpacity","lineWidth","shapeOf","is","setCursor","cursor","canvas","getRootNode","defaultView","dom","getContextService","getDomElement","restoreCursor","selectElementByData","find","every","_ref2","getPointsR","point","nextPoint","sqrt","pow","getPointsPath","isClose","push","getElements","plot","querySelectorAll","getThetaPath","isBig","innerRadius","outerRadius","maybeRoot","rootOf","parent"],"sources":["interaction/utils.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}