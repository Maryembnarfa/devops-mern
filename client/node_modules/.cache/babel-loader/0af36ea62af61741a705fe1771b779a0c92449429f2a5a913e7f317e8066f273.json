{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Rect } from '@antv/g';\nimport { deepMix, upperFirst, isArray } from '@antv/util';\nimport { group, groups } from '@antv/vendor/d3-array';\nimport { format } from '@antv/vendor/d3-format';\nimport { mapObject } from '../utils/array';\nimport { ChartEvent } from '../utils/event';\nimport { isStrictObject, appendTransform, compose, copyAttributes, defined, error, maybeSubObject, subObject, useMemo } from '../utils/helper';\nimport { select, Selection } from '../utils/selection';\nimport { groupComponents, inferComponent, normalizeComponents, renderComponent } from './component';\nimport { AREA_CLASS_NAME, COMPONENT_CLASS_NAME, ELEMENT_CLASS_NAME, LABEL_CLASS_NAME, LABEL_LAYER_CLASS_NAME, MAIN_LAYER_CLASS_NAME, PLOT_CLASS_NAME, VIEW_CLASS_NAME } from './constant';\nimport { coordinate2Transform, createCoordinate } from './coordinate';\nimport { computeLayout, computeRoughPlotSize, placeComponents, processAxisZ } from './layout';\nimport { documentOf, useLibrary } from './library';\nimport { initializeMark } from './mark';\nimport { applyScale, assignScale, collectScales, inferScale, syncFacetsScales, useRelationScale, groupTransform } from './scale';\nimport { applyDataTransform } from './transform';\nexport function plot(options, selection, context) {\n  var _a;\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      library\n    } = context;\n    const [useComposition] = useLibrary('composition', library);\n    const [useInteraction] = useLibrary('interaction', library);\n    // Some helper functions.\n    const marks = new Set(Object.keys(library).map(d => {\n      var _a;\n      return (_a = /mark\\.(.*)/.exec(d)) === null || _a === void 0 ? void 0 : _a[1];\n    }).filter(defined));\n    const staticMarks = new Set(Object.keys(library).map(d => {\n      var _a;\n      return (_a = /component\\.(.*)/.exec(d)) === null || _a === void 0 ? void 0 : _a[1];\n    }).filter(defined));\n    const typeOf = node => {\n      const {\n        type\n      } = node;\n      if (typeof type === 'function') {\n        // @ts-ignore\n        const {\n          props = {}\n        } = type;\n        const {\n          composite = true\n        } = props;\n        if (composite) return 'mark';\n      }\n      if (typeof type !== 'string') return type;\n      if (marks.has(type) || staticMarks.has(type)) return 'mark';\n      return type;\n    };\n    const isMark = node => typeOf(node) === 'mark';\n    const isStandardView = node => typeOf(node) === 'standardView';\n    const isStaticMark = node => {\n      const {\n        type\n      } = node;\n      if (typeof type !== 'string') return false;\n      if (staticMarks.has(type)) return true;\n      return false;\n    };\n    const transform = node => {\n      if (isStandardView(node)) return [node];\n      const type = typeOf(node);\n      const composition = useComposition({\n        type,\n        static: isStaticMark(node)\n      });\n      return composition(node);\n    };\n    // Some temporary variables help parse the view tree.\n    const views = [];\n    const viewNode = new Map();\n    const nodeState = new Map();\n    const discovered = [options];\n    const nodeGenerators = [];\n    while (discovered.length) {\n      const node = discovered.shift();\n      if (isStandardView(node)) {\n        // Initialize view to get data to be visualized. If the marks\n        // of the view have already been initialized (facet view),\n        // initialize the view based on the initialized mark states,\n        // otherwise initialize it from beginning.\n        const state = nodeState.get(node);\n        const [view, children] = state ? initializeState(state, node, library) : yield initializeView(node, context);\n        viewNode.set(view, node);\n        views.push(view);\n        // Transform children, they will be transformed into\n        // standardView if they are mark or view node.\n        const transformedNodes = children.flatMap(transform).map(d => coordinate2Transform(d, library));\n        discovered.push(...transformedNodes);\n        // Only StandardView can be treated as facet and it\n        // should sync position scales among facets normally.\n        if (transformedNodes.every(isStandardView)) {\n          const states = yield Promise.all(transformedNodes.map(d => initializeMarks(d, context)));\n          // Note!!!\n          // This will mutate scales for marks.\n          syncFacetsScales(states);\n          for (let i = 0; i < transformedNodes.length; i++) {\n            const nodeT = transformedNodes[i];\n            const state = states[i];\n            nodeState.set(nodeT, state);\n          }\n        }\n      } else {\n        // Apply transform to get data in advance for non-mark composition\n        // node, which makes sure that composition node can preprocess the\n        // data to produce more nodes based on it.\n        const n = isMark(node) ? node : yield applyTransform(node, context);\n        const N = transform(n);\n        if (Array.isArray(N)) discovered.push(...N);else if (typeof N === 'function') nodeGenerators.push(N());\n      }\n    }\n    context.emitter.emit(ChartEvent.BEFORE_PAINT);\n    // Plot chart.\n    const enterContainer = new Map();\n    const updateContainer = new Map();\n    const transitions = [];\n    selection.selectAll(className(VIEW_CLASS_NAME)).data(views, d => d.key).join(enter => enter.append('g').attr('className', VIEW_CLASS_NAME).attr('id', view => view.key).call(applyTranslate).each(function (view, i, element) {\n      plotView(view, select(element), transitions, context);\n      enterContainer.set(view, element);\n    }), update => update.call(applyTranslate).each(function (view, i, element) {\n      plotView(view, select(element), transitions, context);\n      updateContainer.set(view, element);\n    }), exit => exit.each(function (d, i, element) {\n      // Remove existed interactions.\n      const interactions = element['nameInteraction'].values();\n      for (const interaction of interactions) {\n        interaction.destroy();\n      }\n    }).remove());\n    // Apply interactions.\n    const viewInstanceof = (viewContainer, updateInteractions, oldStore) => {\n      return Array.from(viewContainer.entries()).map(_ref => {\n        let [view, container] = _ref;\n        // Index state by component or interaction name,\n        // such as legend, scrollbar, brushFilter.\n        // Each state transform options to another options.\n        const store = oldStore || new Map();\n        const setState = function (key) {\n          let reducer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x => x;\n          return store.set(key, reducer);\n        };\n        const options = viewNode.get(view);\n        const update = createUpdateView(select(container), options, context);\n        return {\n          view,\n          container,\n          options,\n          setState,\n          update: (from, updateTypes) => __awaiter(this, void 0, void 0, function* () {\n            // Apply all state functions to get new options.\n            const reducer = compose(Array.from(store.values()));\n            const newOptions = reducer(options);\n            return yield update(newOptions, from, () => {\n              if (isArray(updateTypes)) {\n                updateInteractions(viewContainer, updateTypes, store);\n              }\n            });\n          })\n        };\n      });\n    };\n    const updateInteractions = function () {\n      let container = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : updateContainer;\n      let updateType = arguments.length > 1 ? arguments[1] : undefined;\n      let oldStore = arguments.length > 2 ? arguments[2] : undefined;\n      var _a;\n      // Interactions for update views.\n      const updateViewInstances = viewInstanceof(container, updateInteractions, oldStore);\n      for (const target of updateViewInstances) {\n        const {\n          options,\n          container\n        } = target;\n        const nameInteraction = container['nameInteraction'];\n        let typeOptions = inferInteraction(options);\n        if (updateType) {\n          typeOptions = typeOptions.filter(v => updateType.includes(v[0]));\n        }\n        for (const typeOption of typeOptions) {\n          const [type, option] = typeOption;\n          // Remove interaction for existed views.\n          const prevInteraction = nameInteraction.get(type);\n          if (prevInteraction) (_a = prevInteraction.destroy) === null || _a === void 0 ? void 0 : _a.call(prevInteraction);\n          // Apply new interaction.\n          if (option) {\n            const interaction = useThemeInteraction(target.view, type, option, useInteraction);\n            const destroy = interaction(target, updateViewInstances, context.emitter);\n            nameInteraction.set(type, {\n              destroy\n            });\n          }\n        }\n      }\n    };\n    // Interactions for enter views.\n    const enterViewInstances = viewInstanceof(enterContainer, updateInteractions);\n    for (const target of enterViewInstances) {\n      const {\n        options\n      } = target;\n      // A Map index interaction by interaction name.\n      const nameInteraction = new Map();\n      target.container['nameInteraction'] = nameInteraction;\n      // Apply interactions.\n      for (const typeOption of inferInteraction(options)) {\n        const [type, option] = typeOption;\n        if (option) {\n          const interaction = useThemeInteraction(target.view, type, option, useInteraction);\n          const destroy = interaction(target, enterViewInstances, context.emitter);\n          nameInteraction.set(type, {\n            destroy\n          });\n        }\n      }\n    }\n    updateInteractions();\n    // Author animations.\n    const {\n      width,\n      height\n    } = options;\n    const keyframes = [];\n    for (const nodeGenerator of nodeGenerators) {\n      // Delay the rendering of animation keyframe. Different animation\n      // created by different nodeGenerator will play in the same time.\n      // eslint-disable-next-line no-async-promise-executor\n      const keyframe = new Promise(resolve => __awaiter(this, void 0, void 0, function* () {\n        for (const node of nodeGenerator) {\n          const sizedNode = Object.assign({\n            width,\n            height\n          }, node);\n          yield plot(sizedNode, selection, context);\n        }\n        resolve();\n      }));\n      keyframes.push(keyframe);\n    }\n    context.views = views;\n    // Clear and update animation.\n    (_a = context.animations) === null || _a === void 0 ? void 0 : _a.forEach(animation => animation === null || animation === void 0 ? void 0 : animation.cancel());\n    context.animations = transitions;\n    context.emitter.emit(ChartEvent.AFTER_PAINT);\n    // Note!!!\n    // The returned promise will never resolved if one of nodeGenerator\n    // never stop to yield node, which may created by a keyframe composition\n    // with iteration count set to infinite.\n    const finished = transitions.filter(defined).map(cancel).map(d => d.finished);\n    return Promise.all([...finished, ...keyframes]);\n  });\n}\nfunction applyTranslate(selection) {\n  selection.style('transform', d => `translate(${d.layout.x}, ${d.layout.y})`);\n}\nfunction definedInteraction(library) {\n  const [, createInteraction] = useLibrary('interaction', library);\n  return d => {\n    const [name, options] = d;\n    try {\n      return [name, createInteraction(name)];\n    } catch (_a) {\n      return [name, options.type];\n    }\n  };\n}\nfunction createUpdateView(selection, options, context) {\n  const {\n    library\n  } = context;\n  const createDefinedInteraction = definedInteraction(library);\n  const filter = d => d[1] && d[1].props && d[1].props.reapplyWhenUpdate;\n  const interactions = inferInteraction(options);\n  const updates = interactions.map(createDefinedInteraction).filter(filter).map(d => d[0]);\n  return (newOptions, source, callback) => __awaiter(this, void 0, void 0, function* () {\n    const transitions = [];\n    const [newView, newChildren] = yield initializeView(newOptions, context);\n    plotView(newView, selection, transitions, context);\n    // Update interaction need to reapply when update.\n    for (const name of updates.filter(d => d !== source)) {\n      updateInteraction(name, selection, newOptions, newView, context);\n    }\n    for (const child of newChildren) {\n      plot(child, selection, context);\n    }\n    callback();\n    return {\n      options: newOptions,\n      view: newView\n    };\n  });\n}\nfunction updateInteraction(name, selection, options, view, context) {\n  var _a;\n  const {\n    library\n  } = context;\n  const [useInteraction] = useLibrary('interaction', library);\n  // Instances for interaction.\n  const container = selection.node();\n  const nameInteraction = container['nameInteraction'];\n  const interactionOptions = inferInteraction(options).find(_ref2 => {\n    let [d] = _ref2;\n    return d === name;\n  });\n  // Destroy older interaction.\n  const interaction = nameInteraction.get(name);\n  if (!interaction) return;\n  (_a = interaction.destroy) === null || _a === void 0 ? void 0 : _a.call(interaction);\n  if (!interactionOptions[1]) return;\n  // Apply new interaction.\n  const applyInteraction = useThemeInteraction(view, name, interactionOptions[1], useInteraction);\n  const target = {\n    options,\n    view,\n    container: selection.node(),\n    update: options => Promise.resolve(options)\n  };\n  const destroy = applyInteraction(target, [], context.emitter);\n  nameInteraction.set(name, {\n    destroy\n  });\n}\nfunction initializeView(options, context) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      library\n    } = context;\n    const flattenOptions = yield transformMarks(options, context);\n    const mergedOptions = bubbleOptions(flattenOptions);\n    // @todo Remove this.\n    // !!! NOTE: Mute original view options.\n    // Update interaction and coordinate for this view.\n    options.interaction = mergedOptions.interaction;\n    options.coordinate = mergedOptions.coordinate;\n    // @ts-ignore\n    options.marks = [...mergedOptions.marks, ...mergedOptions.components];\n    const transformedOptions = coordinate2Transform(mergedOptions, library);\n    const state = yield initializeMarks(transformedOptions, context);\n    return initializeState(state, transformedOptions, library);\n  });\n}\nfunction bubbleOptions(options) {\n  const {\n      coordinate: viewCoordinate = {},\n      interaction: viewInteraction = {},\n      style: viewStyle = {},\n      marks\n    } = options,\n    rest = __rest(options, [\"coordinate\", \"interaction\", \"style\", \"marks\"]);\n  const markCoordinates = marks.map(d => d.coordinate || {});\n  const markInteractions = marks.map(d => d.interaction || {});\n  const markViewStyles = marks.map(d => d.viewStyle || {});\n  const newCoordinate = [...markCoordinates, viewCoordinate].reduceRight((prev, cur) => deepMix(prev, cur), {});\n  const newInteraction = [viewInteraction, ...markInteractions].reduce((prev, cur) => deepMix(prev, cur), {});\n  const newStyle = [...markViewStyles, viewStyle].reduce((prev, cur) => deepMix(prev, cur), {});\n  return Object.assign(Object.assign({}, rest), {\n    marks,\n    coordinate: newCoordinate,\n    interaction: newInteraction,\n    style: newStyle\n  });\n}\nfunction transformMarks(options, context) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      library\n    } = context;\n    const [useMark, createMark] = useLibrary('mark', library);\n    const staticMarks = new Set(Object.keys(library).map(d => {\n      var _a;\n      return (_a = /component\\.(.*)/.exec(d)) === null || _a === void 0 ? void 0 : _a[1];\n    }).filter(defined));\n    const {\n      marks\n    } = options;\n    const flattenMarks = [];\n    const components = [];\n    const discovered = [...marks];\n    const {\n      width,\n      height\n    } = computeRoughPlotSize(options);\n    const markOptions = {\n      options,\n      width,\n      height\n    };\n    // Pre order traversal.\n    while (discovered.length) {\n      const [node] = discovered.splice(0, 1);\n      // Apply data transform to get data.\n      const mark = yield applyTransform(node, context);\n      const {\n        type = error('G2Mark type is required.'),\n        key\n      } = mark;\n      // For components.\n      if (staticMarks.has(type)) components.push(mark);else {\n        const {\n          props = {}\n        } = createMark(type);\n        const {\n          composite = true\n        } = props;\n        if (!composite) flattenMarks.push(mark);else {\n          // Unwrap data from { value: data } to data,\n          // then the composite mark can process the normalized data.\n          const {\n            data\n          } = mark;\n          const newMark = Object.assign(Object.assign({}, mark), {\n            data: data ? Array.isArray(data) ? data : data.value : data\n          });\n          // Convert composite mark to marks.\n          const marks = yield useMark(newMark, markOptions);\n          const M = Array.isArray(marks) ? marks : [marks];\n          discovered.unshift(...M.map((d, i) => Object.assign(Object.assign({}, d), {\n            key: `${key}-${i}`\n          })));\n        }\n      }\n    }\n    return Object.assign(Object.assign({}, options), {\n      marks: flattenMarks,\n      components\n    });\n  });\n}\nfunction initializeMarks(options, context) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      library\n    } = context;\n    const [useTheme] = useLibrary('theme', library);\n    const [, createMark] = useLibrary('mark', library);\n    const {\n      theme: partialTheme,\n      marks: partialMarks,\n      coordinates = []\n    } = options;\n    const theme = useTheme(inferTheme(partialTheme));\n    const markState = new Map();\n    // Initialize channels for marks.\n    for (const markOptions of partialMarks) {\n      const {\n        type\n      } = markOptions;\n      const {\n        props = {}\n      } = createMark(type);\n      const markAndState = yield initializeMark(markOptions, props, context);\n      if (markAndState) {\n        const [initializedMark, state] = markAndState;\n        markState.set(initializedMark, state);\n      }\n    }\n    // Group channels by scale key, each group has scale.\n    const scaleChannels = group(Array.from(markState.values()).flatMap(d => d.channels), _ref3 => {\n      let {\n        scaleKey\n      } = _ref3;\n      return scaleKey;\n    });\n    // Infer scale for each channel groups.\n    for (const channels of scaleChannels.values()) {\n      // Merge scale options for these channels.\n      const scaleOptions = channels.reduce((total, _ref4) => {\n        let {\n          scale\n        } = _ref4;\n        return deepMix(total, scale);\n      }, {});\n      const {\n        scaleKey\n      } = channels[0];\n      // Use the fields of the first channel as the title.\n      const {\n        values: FV\n      } = channels[0];\n      const fields = Array.from(new Set(FV.map(d => d.field).filter(defined)));\n      const options = deepMix({\n        guide: {\n          title: fields.length === 0 ? undefined : fields\n        },\n        field: fields[0]\n      }, scaleOptions);\n      // Use the name of the first channel as the scale name.\n      const {\n        name\n      } = channels[0];\n      const values = channels.flatMap(_ref5 => {\n        let {\n          values\n        } = _ref5;\n        return values.map(d => d.value);\n      });\n      const scale = Object.assign(Object.assign({}, inferScale(name, values, options, coordinates, theme, library)), {\n        uid: Symbol('scale'),\n        key: scaleKey\n      });\n      channels.forEach(channel => channel.scale = scale);\n    }\n    return markState;\n  });\n}\nfunction useThemeInteraction(view, type, option, useInteraction) {\n  const theme = view.theme;\n  const defaults = typeof type === 'string' ? theme[type] || {} : {};\n  const interaction = useInteraction(deepMix(defaults, Object.assign({\n    type\n  }, option)));\n  return interaction;\n}\nfunction initializeState(markState, options, library) {\n  var _a;\n  const [useMark] = useLibrary('mark', library);\n  const [useTheme] = useLibrary('theme', library);\n  const [useLabelTransform] = useLibrary('labelTransform', library);\n  const {\n    key,\n    frame = false,\n    theme: partialTheme,\n    clip,\n    style = {},\n    labelTransform = []\n  } = options;\n  const theme = useTheme(inferTheme(partialTheme));\n  // Infer components and compute layout.\n  const states = Array.from(markState.values());\n  const scales = collectScales(states, options);\n  const components = normalizeComponents(inferComponent(inferComponentScales(Array.from(scales), states, markState), options, library));\n  const layout = computeLayout(components, options, theme, library);\n  const coordinate = createCoordinate(layout, options, library);\n  const framedStyle = frame ? deepMix({\n    mainLineWidth: 1,\n    mainStroke: '#000'\n  }, style) : style;\n  // Place components and mutate their bbox.\n  placeComponents(groupComponents(components), coordinate, layout);\n  // AxisZ need a copy of axisX and axisY to show grids in X-Z & Y-Z planes.\n  processAxisZ(components);\n  // Index scale instance by uid.\n  const uidScale = new Map(Array.from(markState.values()).flatMap(state => {\n    const {\n      channels\n    } = state;\n    return channels.map(_ref6 => {\n      let {\n        scale\n      } = _ref6;\n      return [scale.uid, useRelationScale(scale, library)];\n    });\n  }));\n  groupTransform(markState, uidScale);\n  // Scale from marks and components.\n  const scaleInstance = {};\n  // Initialize scale from components.\n  for (const component of components) {\n    const {\n      scales: scaleDescriptors = []\n    } = component;\n    const scales = [];\n    for (const descriptor of scaleDescriptors) {\n      const {\n        name,\n        uid\n      } = descriptor;\n      const scale = (_a = uidScale.get(uid)) !== null && _a !== void 0 ? _a : useRelationScale(descriptor, library);\n      scales.push(scale);\n      // Delivery the scale of axisX to the AxisY,\n      // in order to calculate the angle of axisY component when rendering radar chart.\n      if (name === 'y') {\n        scale.update(Object.assign(Object.assign({}, scale.getOptions()), {\n          xScale: scaleInstance.x\n        }));\n      }\n      assignScale(scaleInstance, {\n        [name]: scale\n      });\n    }\n    component.scaleInstances = scales;\n  }\n  // Calc data to be rendered for each mark.\n  // @todo More readable APIs for Container which stays\n  // the same style with JS standard and lodash APIs.\n  // @todo More proper way to index scale for different marks.\n  const children = [];\n  for (const [mark, state] of markState.entries()) {\n    const {\n      // scale,\n      // Callback to create children options based on this mark.\n      children: createChildren,\n      // The total count of data (both show and hide)for this facet.\n      // This is for unit visualization to sync data domain.\n      dataDomain,\n      modifier,\n      key: markKey\n    } = mark;\n    const {\n      index,\n      channels,\n      tooltip\n    } = state;\n    const scale = Object.fromEntries(channels.map(_ref7 => {\n      let {\n        name,\n        scale\n      } = _ref7;\n      return [name, scale];\n    }));\n    // Transform abstract value to visual value by scales.\n    const markScaleInstance = mapObject(scale, _ref8 => {\n      let {\n        uid\n      } = _ref8;\n      return uidScale.get(uid);\n    });\n    assignScale(scaleInstance, markScaleInstance);\n    const value = applyScale(channels, markScaleInstance);\n    // Calc points and transformation for each data,\n    // and then transform visual value to visual data.\n    const calcPoints = useMark(mark);\n    const [I, P, S] = filterValid(calcPoints(index, markScaleInstance, value, coordinate));\n    const count = dataDomain || I.length;\n    const T = modifier ? modifier(P, count, layout) : [];\n    const titleOf = i => {\n      var _a, _b;\n      return (_b = (_a = tooltip.title) === null || _a === void 0 ? void 0 : _a[i]) === null || _b === void 0 ? void 0 : _b.value;\n    };\n    const itemsOf = i => tooltip.items.map(V => V[i]);\n    const visualData = I.map((d, i) => {\n      const datum = Object.assign({\n        points: P[i],\n        transform: T[i],\n        index: d,\n        markKey,\n        viewKey: key\n      }, tooltip && {\n        title: titleOf(d),\n        items: itemsOf(d)\n      });\n      for (const [k, V] of Object.entries(value)) {\n        datum[k] = V[d];\n        if (S) datum[`series${upperFirst(k)}`] = S[i].map(i => V[i]);\n      }\n      if (S) datum['seriesIndex'] = S[i];\n      if (S && tooltip) {\n        datum['seriesItems'] = S[i].map(si => itemsOf(si));\n        datum['seriesTitle'] = S[i].map(si => titleOf(si));\n      }\n      return datum;\n    });\n    state.data = visualData;\n    state.index = I;\n    // Create children options by children callback,\n    // and then propagate data to each child.\n    const markChildren = createChildren === null || createChildren === void 0 ? void 0 : createChildren(visualData, markScaleInstance, layout);\n    children.push(...(markChildren || []));\n  }\n  const view = {\n    layout,\n    theme,\n    coordinate,\n    markState,\n    key,\n    clip,\n    scale: scaleInstance,\n    style: framedStyle,\n    components,\n    labelTransform: compose(labelTransform.map(useLabelTransform))\n  };\n  return [view, children];\n}\nfunction plotView(view, selection, transitions, context) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      library\n    } = context;\n    const {\n      components,\n      theme,\n      layout,\n      markState,\n      coordinate,\n      key,\n      style,\n      clip,\n      scale\n    } = view;\n    // Render background for the different areas.\n    const {\n        x,\n        y,\n        width,\n        height\n      } = layout,\n      rest = __rest(layout, [\"x\", \"y\", \"width\", \"height\"]);\n    const areaKeys = ['view', 'plot', 'main', 'content'];\n    const I = areaKeys.map((_, i) => i);\n    const sizeKeys = ['a', 'margin', 'padding', 'inset'];\n    const areaStyles = areaKeys.map(d => maybeSubObject(Object.assign({}, theme.view, style), d));\n    const areaSizes = sizeKeys.map(d => subObject(rest, d));\n    const styleArea = selection => selection.style('x', i => areaLayouts[i].x).style('y', i => areaLayouts[i].y).style('width', i => areaLayouts[i].width).style('height', i => areaLayouts[i].height).each(function (i, d, element) {\n      applyStyle(select(element), areaStyles[i]);\n    });\n    let px = 0;\n    let py = 0;\n    let pw = width;\n    let ph = height;\n    const areaLayouts = I.map(i => {\n      const size = areaSizes[i];\n      const {\n        left = 0,\n        top = 0,\n        bottom = 0,\n        right = 0\n      } = size;\n      px += left;\n      py += top;\n      pw -= left + right;\n      ph -= top + bottom;\n      return {\n        x: px,\n        y: py,\n        width: pw,\n        height: ph\n      };\n    });\n    selection.selectAll(className(AREA_CLASS_NAME)).data(\n    // Only render area with defined style.\n    I.filter(i => defined(areaStyles[i])), i => areaKeys[i]).join(enter => enter.append('rect').attr('className', AREA_CLASS_NAME).style('zIndex', -2).call(styleArea), update => update.call(styleArea), exit => exit.remove());\n    const animationExtent = computeAnimationExtent(markState);\n    const componentAnimateOptions = animationExtent ? {\n      duration: animationExtent[1]\n    } : false;\n    // Render components.\n    // @todo renderComponent return ctor and options.\n    // Key for each type of component.\n    // Index them grouped by position.\n    for (const [, C] of groups(components, d => `${d.type}-${d.position}`)) {\n      C.forEach((d, i) => d.index = i);\n    }\n    const componentsTransitions = selection.selectAll(className(COMPONENT_CLASS_NAME)).data(components, d => `${d.type}-${d.position}-${d.index}`).join(enter => enter.append('g').style('zIndex', _ref9 => {\n      let {\n        zIndex\n      } = _ref9;\n      return zIndex || -1;\n    }).attr('className', COMPONENT_CLASS_NAME).append(options => renderComponent(deepMix({\n      animate: componentAnimateOptions,\n      scale\n    }, options), coordinate, theme, library, markState)), update => update.transition(function (options, i, element) {\n      const {\n        preserve = false\n      } = options;\n      if (preserve) return;\n      const newComponent = renderComponent(deepMix({\n        animate: componentAnimateOptions,\n        scale\n      }, options), coordinate, theme, library, markState);\n      const {\n        attributes\n      } = newComponent;\n      const [node] = element.childNodes;\n      return node.update(attributes, false);\n    })).transitions();\n    transitions.push(...componentsTransitions.flat().filter(defined));\n    // Main layer is for showing the main visual representation such as marks. There\n    // may be multiple main layers for a view, each main layer correspond to one of marks.\n    // @todo Test DOM structure.\n    const T = selection.selectAll(className(PLOT_CLASS_NAME)).data([layout], () => key).join(enter => enter\n    // Make this layer interactive, such as click and mousemove events.\n    .append('rect').style('zIndex', 0).style('fill', 'transparent').attr('className', PLOT_CLASS_NAME).call(updateBBox).call(updateLayers, Array.from(markState.keys())).call(applyClip, clip), update => update.call(updateLayers, Array.from(markState.keys())).call(selection => {\n      return animationExtent ? animateBBox(selection, animationExtent) : updateBBox(selection);\n    }).call(applyClip, clip)).transitions();\n    transitions.push(...T.flat());\n    // Render marks with corresponding data.\n    for (const [mark, state] of markState.entries()) {\n      const {\n        data\n      } = state;\n      const {\n        key,\n        class: cls,\n        type\n      } = mark;\n      const viewNode = selection.select(`#${key}`);\n      const shapeFunction = createMarkShapeFunction(mark, state, view, context);\n      const enterFunction = createEnterFunction(mark, state, view, library);\n      const updateFunction = createUpdateFunction(mark, state, view, library);\n      const exitFunction = createExitFunction(mark, state, view, library);\n      const facetElements = selectFacetElements(selection, viewNode, cls, 'element');\n      const T = viewNode.selectAll(className(ELEMENT_CLASS_NAME)).selectFacetAll(facetElements).data(data, d => d.key, d => d.groupKey).join(enter => enter.append(shapeFunction)\n      // Note!!! Only one className can be set.\n      // Using attribute as alternative for other classNames.\n      .attr('className', ELEMENT_CLASS_NAME).attr('markType', type).transition(function (data, i, element) {\n        return enterFunction(data, [element]);\n      }), update => update.call(selection => {\n        const parent = selection.parent();\n        const origin = useMemo(node => {\n          const [x, y] = node.getBounds().min;\n          return [x, y];\n        });\n        selection.transition(function (data, index, element) {\n          maybeFacetElement(element, parent, origin);\n          const node = shapeFunction(data, index);\n          const animation = updateFunction(data, [element], [node]);\n          if (animation !== null) return animation;\n          if (element.nodeName === node.nodeName && node.nodeName !== 'g') {\n            copyAttributes(element, node);\n          } else {\n            element.parentNode.replaceChild(node, element);\n            node.className = ELEMENT_CLASS_NAME;\n            // @ts-ignore\n            node.markType = type;\n            // @ts-ignore\n            node.__data__ = element.__data__;\n          }\n          return animation;\n        }).attr('markType', type).attr('className', ELEMENT_CLASS_NAME);\n      }), exit => {\n        return exit.each(function (d, i, element) {\n          element.__removed__ = true;\n        }).transition(function (data, i, element) {\n          return exitFunction(data, [element]);\n        }).remove();\n      }, merge => merge\n      // Append elements to be merged.\n      .append(shapeFunction).attr('className', ELEMENT_CLASS_NAME).attr('markType', type).transition(function (data, i, element) {\n        // Remove merged elements after animation finishing.\n        const {\n          __fromElements__: fromElements\n        } = element;\n        const transition = updateFunction(data, fromElements, [element]);\n        const exit = new Selection(fromElements, null, element.parentNode);\n        exit.transition(transition).remove();\n        return transition;\n      }), split => split.transition(function (data, i, element) {\n        // Append splitted shapes.\n        const enter = new Selection([], element.__toData__, element.parentNode);\n        const toElements = enter.append(shapeFunction).attr('className', ELEMENT_CLASS_NAME).attr('markType', type).nodes();\n        return updateFunction(data, [element], toElements);\n      })\n      // Remove elements to be splitted after animation finishing.\n      .remove()).transitions();\n      transitions.push(...T.flat());\n    }\n    // Plot label for this view.\n    plotLabel(view, selection, transitions, library, context);\n  });\n}\n/**\n * Auto hide labels be specify label layout.\n */\nfunction plotLabel(view, selection, transitions, library, context) {\n  const [useLabelTransform] = useLibrary('labelTransform', library);\n  const {\n    markState,\n    labelTransform\n  } = view;\n  const labelLayer = selection.select(className(LABEL_LAYER_CLASS_NAME)).node();\n  // A Map index shapeFunction by label.\n  const labelShapeFunction = new Map();\n  // A Map index options by label.\n  const labelDescriptor = new Map();\n  // Get all labels for this view.\n  const labels = Array.from(markState.entries()).flatMap(_ref10 => {\n    let [mark, state] = _ref10;\n    const {\n      labels: labelOptions = [],\n      key\n    } = mark;\n    const shapeFunction = createLabelShapeFunction(mark, state, view, library, context);\n    const elements = selection.select(`#${key}`).selectAll(className(ELEMENT_CLASS_NAME)).nodes()\n    // Only select the valid element.\n    .filter(n => !n.__removed__);\n    return labelOptions.flatMap((labelOption, i) => {\n      const {\n          transform = []\n        } = labelOption,\n        options = __rest(labelOption, [\"transform\"]);\n      return elements.flatMap(e => {\n        const L = getLabels(options, i, e);\n        L.forEach(l => {\n          labelShapeFunction.set(l, data => shapeFunction(Object.assign(Object.assign({}, data), {\n            element: e\n          })));\n          labelDescriptor.set(l, labelOption);\n        });\n        return L;\n      });\n    });\n  });\n  // Render all labels.\n  const labelShapes = select(labelLayer).selectAll(className(LABEL_CLASS_NAME)).data(labels, d => d.key).join(enter => enter.append(d => labelShapeFunction.get(d)(d)).attr('className', LABEL_CLASS_NAME), update => update.each(function (d, i, element) {\n    // @todo Handle Label with different type.\n    const shapeFunction = labelShapeFunction.get(d);\n    const node = shapeFunction(d);\n    copyAttributes(element, node);\n  }), exit => exit.remove()).nodes();\n  // Apply group-level transforms.\n  const labelGroups = group(labelShapes, d => labelDescriptor.get(d.__data__));\n  const {\n    coordinate,\n    layout\n  } = view;\n  const labelTransformContext = {\n    canvas: context.canvas,\n    coordinate,\n    layout\n  };\n  for (const [label, shapes] of labelGroups) {\n    const {\n      transform = []\n    } = label;\n    const transformFunction = compose(transform.map(useLabelTransform));\n    transformFunction(shapes, labelTransformContext);\n  }\n  // Apply view-level transform.\n  if (labelTransform) {\n    labelTransform(labelShapes, labelTransformContext);\n  }\n}\nfunction getLabels(label, labelIndex, element) {\n  const {\n    seriesIndex: SI,\n    seriesKey,\n    points,\n    key,\n    index\n  } = element.__data__;\n  const bounds = getLocalBounds(element);\n  if (!SI) {\n    return [Object.assign(Object.assign({}, label), {\n      key: `${key}-${labelIndex}`,\n      bounds,\n      index,\n      points,\n      dependentElement: element\n    })];\n  }\n  const selector = normalizeLabelSelector(label);\n  const F = SI.map((index, i) => Object.assign(Object.assign({}, label), {\n    key: `${seriesKey[i]}-${labelIndex}`,\n    bounds: [points[i]],\n    index,\n    points,\n    dependentElement: element\n  }));\n  return selector ? selector(F) : F;\n}\nfunction filterValid(_ref11) {\n  let [I, P, S] = _ref11;\n  if (S) return [I, P, S];\n  const definedIndex = [];\n  const definedPoints = [];\n  for (let i = 0; i < I.length; i++) {\n    const d = I[i];\n    const p = P[i];\n    if (p.every(_ref12 => {\n      let [x, y] = _ref12;\n      return defined(x) && defined(y);\n    })) {\n      definedIndex.push(d);\n      definedPoints.push(p);\n    }\n  }\n  return [definedIndex, definedPoints];\n}\nfunction normalizeLabelSelector(label) {\n  const {\n    selector\n  } = label;\n  if (!selector) return null;\n  if (typeof selector === 'function') return selector;\n  if (selector === 'first') return I => [I[0]];\n  if (selector === 'last') return I => [I[I.length - 1]];\n  throw new Error(`Unknown selector: ${selector}`);\n}\n/**\n * Avoid getting error bounds caused by element animations.\n * @todo Remove this temporary handle method, if runtime supports\n * correct process: drawElement, do label layout and then do\n * transitions together.\n */\nfunction getLocalBounds(element) {\n  const cloneElement = element.cloneNode();\n  const animations = element.getAnimations();\n  cloneElement.style.visibility = 'hidden';\n  animations.forEach(animation => {\n    const keyframes = animation.effect.getKeyframes();\n    cloneElement.attr(keyframes[keyframes.length - 1]);\n  });\n  element.parentNode.appendChild(cloneElement);\n  const bounds = cloneElement.getLocalBounds();\n  cloneElement.destroy();\n  const {\n    min,\n    max\n  } = bounds;\n  return [min, max];\n}\nfunction createLabelShapeFunction(mark, state, view, library, context) {\n  const [useShape] = useLibrary('shape', library);\n  const {\n    data: abstractData,\n    encode\n  } = mark;\n  const {\n    data: visualData,\n    defaultLabelShape\n  } = state;\n  const point2d = visualData.map(d => d.points);\n  const channel = mapObject(encode, d => d.value);\n  // Assemble Context.\n  const {\n    theme,\n    coordinate\n  } = view;\n  const shapeContext = Object.assign(Object.assign({}, context), {\n    document: documentOf(context),\n    theme,\n    coordinate\n  });\n  return options => {\n    // Computed values from data and styles.\n    const {\n      index,\n      points\n    } = options;\n    const datum = abstractData[index];\n    const {\n        formatter = d => `${d}`,\n        transform,\n        style: abstractStyle,\n        render,\n        selector,\n        element\n      } = options,\n      abstractOptions = __rest(options, [\"formatter\", \"transform\", \"style\", \"render\", \"selector\", \"element\"]);\n    const visualOptions = mapObject(Object.assign(Object.assign({}, abstractOptions), abstractStyle), d => valueOf(d, datum, index, abstractData, {\n      channel,\n      element\n    }));\n    const {\n        shape = defaultLabelShape,\n        text\n      } = visualOptions,\n      style = __rest(visualOptions, [\"shape\", \"text\"]);\n    const f = typeof formatter === 'string' ? format(formatter) : formatter;\n    const value = Object.assign(Object.assign({}, style), {\n      text: f(text, datum, index, abstractData),\n      datum\n    });\n    // Params for create shape.\n    const shapeOptions = Object.assign({\n      type: `label.${shape}`,\n      render\n    }, style);\n    const shapeFunction = useShape(shapeOptions, shapeContext);\n    const defaults = getDefaultsStyle(theme, 'label', shape, 'label');\n    return shapeFunction(points, value, defaults, point2d);\n  };\n}\nfunction valueOf(value, datum, i, data, options) {\n  if (typeof value === 'function') return value(datum, i, data, options);\n  if (typeof value !== 'string') return value;\n  if (isStrictObject(datum) && datum[value] !== undefined) return datum[value];\n  return value;\n}\n/**\n * Compute max duration for this frame.\n */\nfunction computeAnimationExtent(markState) {\n  let maxDuration = -Infinity;\n  let minDelay = Infinity;\n  for (const [mark, state] of markState) {\n    const {\n      animate = {}\n    } = mark;\n    const {\n      data\n    } = state;\n    const {\n      enter = {},\n      update = {},\n      exit = {}\n    } = animate;\n    const {\n      type: defaultUpdateType,\n      duration: defaultUpdateDuration = 300,\n      delay: defaultUpdateDelay = 0\n    } = update;\n    const {\n      type: defaultEnterType,\n      duration: defaultEnterDuration = 300,\n      delay: defaultEnterDelay = 0\n    } = enter;\n    const {\n      type: defaultExitType,\n      duration: defaultExitDuration = 300,\n      delay: defaultExitDelay = 0\n    } = exit;\n    for (const d of data) {\n      const {\n        updateType = defaultUpdateType,\n        updateDuration = defaultUpdateDuration,\n        updateDelay = defaultUpdateDelay,\n        enterType = defaultEnterType,\n        enterDuration = defaultEnterDuration,\n        enterDelay = defaultEnterDelay,\n        exitDuration = defaultExitDuration,\n        exitDelay = defaultExitDelay,\n        exitType = defaultExitType\n      } = d;\n      if (updateType === undefined || updateType) {\n        maxDuration = Math.max(maxDuration, updateDuration + updateDelay);\n        minDelay = Math.min(minDelay, updateDelay);\n      }\n      if (exitType === undefined || exitType) {\n        maxDuration = Math.max(maxDuration, exitDuration + exitDelay);\n        minDelay = Math.min(minDelay, exitDelay);\n      }\n      if (enterType === undefined || enterType) {\n        maxDuration = Math.max(maxDuration, enterDuration + enterDelay);\n        minDelay = Math.min(minDelay, enterDelay);\n      }\n    }\n  }\n  if (maxDuration === -Infinity) return null;\n  return [minDelay, maxDuration - minDelay];\n}\nfunction selectFacetElements(selection, current, facetClassName, elementClassName) {\n  const group = selection.node().parentElement;\n  return group.findAll(node => node.style.facet !== undefined && node.style.facet === facetClassName && node !== current.node()).flatMap(node => node.getElementsByClassName(elementClassName));\n}\n/**\n * Update the parent of element and apply transform to make it\n * stay in original position.\n */\nfunction maybeFacetElement(element, parent, originOf) {\n  if (!element.__facet__) return;\n  // element -> g#main -> rect#plot\n  const prePlot = element.parentNode.parentNode;\n  // g#main -> rect#plot\n  const newPlot = parent.parentNode;\n  const [px, py] = originOf(prePlot);\n  const [x, y] = originOf(newPlot);\n  const translate = `translate(${px - x}, ${py - y})`;\n  appendTransform(element, translate);\n  parent.append(element);\n}\nfunction createMarkShapeFunction(mark, state, view, context) {\n  const {\n    library\n  } = context;\n  const [useShape] = useLibrary('shape', library);\n  const {\n    data: abstractData,\n    encode\n  } = mark;\n  const {\n    defaultShape,\n    data,\n    shape: shapeLibrary\n  } = state;\n  const channel = mapObject(encode, d => d.value);\n  const point2d = data.map(d => d.points);\n  const {\n    theme,\n    coordinate\n  } = view;\n  const {\n    type: markType,\n    style = {}\n  } = mark;\n  const shapeContext = Object.assign(Object.assign({}, context), {\n    document: documentOf(context),\n    coordinate,\n    theme\n  });\n  return data => {\n    const {\n      shape: styleShape = defaultShape\n    } = style;\n    const {\n        shape = styleShape,\n        points,\n        seriesIndex,\n        index: i\n      } = data,\n      v = __rest(data, [\"shape\", \"points\", \"seriesIndex\", \"index\"]);\n    const value = Object.assign(Object.assign({}, v), {\n      index: i\n    });\n    // Get data-driven style.\n    // If it is a series shape, such as area and line,\n    // provides the series of abstract data and indices\n    // for this shape, otherwise the single datum and\n    // index.\n    const abstractDatum = seriesIndex ? seriesIndex.map(i => abstractData[i]) : abstractData[i];\n    const I = seriesIndex ? seriesIndex : i;\n    const visualStyle = mapObject(style, d => valueOf(d, abstractDatum, I, abstractData, {\n      channel\n    }));\n    // Try get shape from mark first, then from library.\n    const shapeFunction = shapeLibrary[shape] ? shapeLibrary[shape](visualStyle, shapeContext) : useShape(Object.assign(Object.assign({}, visualStyle), {\n      type: shapeName(mark, shape)\n    }), shapeContext);\n    const defaults = getDefaultsStyle(theme, markType, shape, defaultShape);\n    return shapeFunction(points, value, defaults, point2d);\n  };\n}\nfunction getDefaultsStyle(theme, mark, shape, defaultShape) {\n  if (typeof mark !== 'string') return;\n  const {\n    color\n  } = theme;\n  const markTheme = theme[mark] || {};\n  const shapeTheme = markTheme[shape] || markTheme[defaultShape];\n  return Object.assign({\n    color\n  }, shapeTheme);\n}\nfunction createAnimationFunction(type, mark, state, view, library) {\n  var _a, _b;\n  const [, createShape] = useLibrary('shape', library);\n  const [useAnimation] = useLibrary('animation', library);\n  const {\n    defaultShape,\n    shape: shapeLibrary\n  } = state;\n  const {\n    theme,\n    coordinate\n  } = view;\n  const upperType = upperFirst(type);\n  const key = `default${upperType}Animation`;\n  // Get shape from mark first, then from library.\n  const {\n    [key]: defaultAnimation\n  } = ((_a = shapeLibrary[defaultShape]) === null || _a === void 0 ? void 0 : _a.props) || createShape(shapeName(mark, defaultShape)).props;\n  const {\n    [type]: defaultEffectTiming = {}\n  } = theme;\n  const animate = ((_b = mark.animate) === null || _b === void 0 ? void 0 : _b[type]) || {};\n  const context = {\n    coordinate\n  };\n  return (data, from, to) => {\n    const {\n      [`${type}Type`]: animation,\n      [`${type}Delay`]: delay,\n      [`${type}Duration`]: duration,\n      [`${type}Easing`]: easing\n    } = data;\n    const options = Object.assign({\n      type: animation || defaultAnimation\n    }, animate);\n    if (!options.type) return null;\n    const animateFunction = useAnimation(options, context);\n    const value = {\n      delay,\n      duration,\n      easing\n    };\n    const A = animateFunction(from, to, deepMix(defaultEffectTiming, value));\n    if (!Array.isArray(A)) return [A];\n    return A;\n  };\n}\nfunction createEnterFunction(mark, state, view, library) {\n  return createAnimationFunction('enter', mark, state, view, library);\n}\n/**\n * Animation will not cancel automatically, it should be canceled\n * manually. This is very important for performance.\n */\nfunction cancel(animation) {\n  animation.finished.then(() => {\n    animation.cancel();\n  });\n  return animation;\n}\nfunction createUpdateFunction(mark, state, view, library) {\n  return createAnimationFunction('update', mark, state, view, library);\n}\nfunction createExitFunction(mark, state, view, library) {\n  return createAnimationFunction('exit', mark, state, view, library);\n}\nfunction inferTheme() {\n  let theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof theme === 'string') return {\n    type: theme\n  };\n  const {\n      type = 'light'\n    } = theme,\n    rest = __rest(theme, [\"type\"]);\n  return Object.assign(Object.assign({}, rest), {\n    type\n  });\n}\n/**\n * @todo Infer builtin tooltips.\n */\nfunction inferInteraction(view) {\n  const defaults = {\n    event: true,\n    tooltip: true,\n    // @todo Inferred by slider self.\n    sliderFilter: true,\n    legendFilter: true,\n    scrollbarFilter: true\n  };\n  const {\n    interaction = {}\n  } = view;\n  return Object.entries(deepMix(defaults, interaction)).reverse();\n}\nfunction applyTransform(node, context) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n        data\n      } = node,\n      rest = __rest(node, [\"data\"]);\n    if (data == undefined) return node;\n    const [, {\n      data: newData\n    }] = yield applyDataTransform([], {\n      data\n    }, context);\n    return Object.assign({\n      data: newData\n    }, rest);\n  });\n}\nfunction updateBBox(selection) {\n  selection.style('transform', d => `translate(${d.paddingLeft + d.marginLeft}, ${d.paddingTop + d.marginTop})`).style('width', d => d.innerWidth).style('height', d => d.innerHeight);\n}\nfunction animateBBox(selection, extent) {\n  const [delay, duration] = extent;\n  selection.transition(function (data, i, element) {\n    const {\n      transform,\n      width,\n      height\n    } = element.style;\n    const {\n      paddingLeft,\n      paddingTop,\n      innerWidth,\n      innerHeight,\n      marginLeft,\n      marginTop\n    } = data;\n    const keyframes = [{\n      transform,\n      width,\n      height\n    }, {\n      transform: `translate(${paddingLeft + marginLeft}, ${paddingTop + marginTop})`,\n      width: innerWidth,\n      height: innerHeight\n    }];\n    return element.animate(keyframes, {\n      delay,\n      duration,\n      fill: 'both'\n    });\n  });\n}\nfunction shapeName(mark, name) {\n  const {\n    type\n  } = mark;\n  if (typeof name === 'string') return `${type}.${name}`;\n  return name;\n}\n/**\n * Create and update layer for each mark.\n * All the layers created here are treated as main layers.\n */\nfunction updateLayers(selection, marks) {\n  const facet = d => d.class !== undefined ? `${d.class}` : '';\n  // Skip for empty selection, it can't append nodes.\n  const nodes = selection.nodes();\n  if (nodes.length === 0) return;\n  selection.selectAll(className(MAIN_LAYER_CLASS_NAME)).data(marks, d => d.key).join(enter => enter.append('g').attr('className', MAIN_LAYER_CLASS_NAME).attr('id', d => d.key).style('facet', facet).style('fill', 'transparent').style('zIndex', d => {\n    var _a;\n    return (_a = d.zIndex) !== null && _a !== void 0 ? _a : 0;\n  }), update => update.style('facet', facet).style('fill', 'transparent').style('zIndex', d => {\n    var _a;\n    return (_a = d.zIndex) !== null && _a !== void 0 ? _a : 0;\n  }), exit => exit.remove());\n  const labelLayer = selection.select(className(LABEL_LAYER_CLASS_NAME)).node();\n  if (labelLayer) return;\n  selection.append('g').attr('className', LABEL_LAYER_CLASS_NAME).style('zIndex', 0);\n}\nfunction className() {\n  for (var _len = arguments.length, names = new Array(_len), _key = 0; _key < _len; _key++) {\n    names[_key] = arguments[_key];\n  }\n  return names.map(d => `.${d}`).join('');\n}\nfunction applyClip(selection, clip) {\n  if (!selection.node()) return;\n  selection.style('clipPath', data => {\n    if (!clip) return null;\n    const {\n      paddingTop: y,\n      paddingLeft: x,\n      marginLeft: x1,\n      marginTop: y1,\n      innerWidth: width,\n      innerHeight: height\n    } = data;\n    return new Rect({\n      style: {\n        x: x + x1,\n        y: y + y1,\n        width,\n        height\n      }\n    });\n  });\n}\nfunction inferComponentScales(scales, states, markState) {\n  // add shape scale to state.\n  var _a;\n  // for cell, omit shape scale.\n  // @todo support shape scale for cell.\n  for (const [key] of markState.entries()) {\n    if (key.type === 'cell') {\n      return scales.filter(scale => scale.name !== 'shape');\n    }\n  }\n  // can't infer shape scale if there are multiple states.\n  if (states.length !== 1 || scales.some(scale => scale.name === 'shape')) {\n    return scales;\n  }\n  const {\n    defaultShape: shape\n  } = states[0];\n  const acceptMarkTypes = ['point', 'line', 'rect', 'hollow'];\n  if (!acceptMarkTypes.includes(shape)) return scales;\n  const shapeMap = {\n    point: 'point',\n    line: 'hyphen',\n    rect: 'square',\n    hollow: 'hollow'\n  };\n  // create shape scale\n  const field = ((_a = scales.find(scale => scale.name === 'color')) === null || _a === void 0 ? void 0 : _a.field) || null;\n  const shapeScale = {\n    field,\n    name: 'shape',\n    type: 'constant',\n    domain: [],\n    range: [shapeMap[shape]]\n  };\n  return [...scales, shapeScale];\n}\nexport function applyStyle(selection, style) {\n  for (const [key, value] of Object.entries(style)) {\n    selection.style(key, value);\n  }\n}","map":{"version":3,"names":["Rect","deepMix","upperFirst","isArray","group","groups","format","mapObject","ChartEvent","isStrictObject","appendTransform","compose","copyAttributes","defined","error","maybeSubObject","subObject","useMemo","select","Selection","groupComponents","inferComponent","normalizeComponents","renderComponent","AREA_CLASS_NAME","COMPONENT_CLASS_NAME","ELEMENT_CLASS_NAME","LABEL_CLASS_NAME","LABEL_LAYER_CLASS_NAME","MAIN_LAYER_CLASS_NAME","PLOT_CLASS_NAME","VIEW_CLASS_NAME","coordinate2Transform","createCoordinate","computeLayout","computeRoughPlotSize","placeComponents","processAxisZ","documentOf","useLibrary","initializeMark","applyScale","assignScale","collectScales","inferScale","syncFacetsScales","useRelationScale","groupTransform","applyDataTransform","plot","options","selection","context","library","useComposition","useInteraction","marks","Set","Object","keys","map","d","_a","exec","filter","staticMarks","typeOf","node","type","props","composite","has","isMark","isStandardView","isStaticMark","transform","composition","static","views","viewNode","Map","nodeState","discovered","nodeGenerators","length","shift","state","get","view","children","initializeState","initializeView","set","push","transformedNodes","flatMap","every","states","Promise","all","initializeMarks","i","nodeT","n","applyTransform","N","Array","emitter","emit","BEFORE_PAINT","enterContainer","updateContainer","transitions","selectAll","className","data","key","join","enter","append","attr","call","applyTranslate","each","element","plotView","update","exit","interactions","values","interaction","destroy","remove","viewInstanceof","viewContainer","updateInteractions","oldStore","from","entries","_ref","container","store","setState","reducer","arguments","undefined","x","createUpdateView","updateTypes","__awaiter","newOptions","updateType","updateViewInstances","target","nameInteraction","typeOptions","inferInteraction","v","includes","typeOption","option","prevInteraction","useThemeInteraction","enterViewInstances","width","height","keyframes","nodeGenerator","keyframe","resolve","sizedNode","assign","animations","forEach","animation","cancel","AFTER_PAINT","finished","style","layout","y","definedInteraction","createInteraction","name","createDefinedInteraction","reapplyWhenUpdate","updates","source","callback","newView","newChildren","updateInteraction","child","interactionOptions","find","_ref2","applyInteraction","flattenOptions","transformMarks","mergedOptions","bubbleOptions","coordinate","components","transformedOptions","viewCoordinate","viewInteraction","viewStyle","rest","__rest","markCoordinates","markInteractions","markViewStyles","newCoordinate","reduceRight","prev","cur","newInteraction","reduce","newStyle","useMark","createMark","flattenMarks","markOptions","splice","mark","newMark","value","M","unshift","useTheme","theme","partialTheme","partialMarks","coordinates","inferTheme","markState","markAndState","initializedMark","scaleChannels","channels","_ref3","scaleKey","scaleOptions","total","_ref4","scale","FV","fields","field","guide","title","_ref5","uid","Symbol","channel","defaults","useLabelTransform","frame","clip","labelTransform","scales","inferComponentScales","framedStyle","mainLineWidth","mainStroke","uidScale","_ref6","scaleInstance","component","scaleDescriptors","descriptor","getOptions","xScale","scaleInstances","createChildren","dataDomain","modifier","markKey","index","tooltip","fromEntries","_ref7","markScaleInstance","_ref8","calcPoints","I","P","S","filterValid","count","T","titleOf","_b","itemsOf","items","V","visualData","datum","points","viewKey","k","si","markChildren","areaKeys","_","sizeKeys","areaStyles","areaSizes","styleArea","areaLayouts","applyStyle","px","py","pw","ph","size","left","top","bottom","right","animationExtent","computeAnimationExtent","componentAnimateOptions","duration","C","position","componentsTransitions","_ref9","zIndex","animate","transition","preserve","newComponent","attributes","childNodes","flat","updateBBox","updateLayers","applyClip","animateBBox","class","cls","shapeFunction","createMarkShapeFunction","enterFunction","createEnterFunction","updateFunction","createUpdateFunction","exitFunction","createExitFunction","facetElements","selectFacetElements","selectFacetAll","groupKey","parent","origin","getBounds","min","maybeFacetElement","nodeName","parentNode","replaceChild","markType","__data__","__removed__","merge","__fromElements__","fromElements","split","__toData__","toElements","nodes","plotLabel","labelLayer","labelShapeFunction","labelDescriptor","labels","_ref10","labelOptions","createLabelShapeFunction","elements","labelOption","e","L","getLabels","l","labelShapes","labelGroups","labelTransformContext","canvas","label","shapes","transformFunction","labelIndex","seriesIndex","SI","seriesKey","bounds","getLocalBounds","dependentElement","selector","normalizeLabelSelector","F","_ref11","definedIndex","definedPoints","p","_ref12","Error","cloneElement","cloneNode","getAnimations","visibility","effect","getKeyframes","appendChild","max","useShape","abstractData","encode","defaultLabelShape","point2d","shapeContext","document","formatter","abstractStyle","render","abstractOptions","visualOptions","valueOf","shape","text","f","shapeOptions","getDefaultsStyle","maxDuration","Infinity","minDelay","defaultUpdateType","defaultUpdateDuration","delay","defaultUpdateDelay","defaultEnterType","defaultEnterDuration","defaultEnterDelay","defaultExitType","defaultExitDuration","defaultExitDelay","updateDuration","updateDelay","enterType","enterDuration","enterDelay","exitDuration","exitDelay","exitType","Math","current","facetClassName","elementClassName","parentElement","findAll","facet","getElementsByClassName","originOf","__facet__","prePlot","newPlot","translate","defaultShape","shapeLibrary","styleShape","abstractDatum","visualStyle","shapeName","color","markTheme","shapeTheme","createAnimationFunction","createShape","useAnimation","upperType","defaultAnimation","defaultEffectTiming","to","easing","animateFunction","A","then","event","sliderFilter","legendFilter","scrollbarFilter","reverse","newData","paddingLeft","marginLeft","paddingTop","marginTop","innerWidth","innerHeight","extent","fill","_len","names","_key","x1","y1","some","acceptMarkTypes","shapeMap","point","line","rect","hollow","shapeScale","domain","range"],"sources":["runtime/plot.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}