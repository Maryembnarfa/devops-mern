{"ast":null,"code":"import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import React,{useState}from'react';import{EditOutlined,DeleteOutlined,EyeOutlined}from'@ant-design/icons';import{Table,message,Button,Modal}from'antd';import{axiosInstance}from\"../../lib/axios\";import AddVehicle from\"./addVehicle\";import UpdateVehicle from'./updateVehicle';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Vehicle=()=>{const[open,setOpen]=useState(false);const[openUpdate,setOpenUpdate]=useState(false);const[openView,setOpenView]=useState(false);const[id,setId]=useState();const[selectedVehicle,setSelectedVehicle]=useState(null);const queryClient=useQueryClient();// Récupérer les données des vehicles\nconst{data,isLoading}=useQuery({queryKey:[\"vehicle\"],queryFn:async()=>{const response=await axiosInstance.get(\"/vehicle\");return response.data;},onError:error=>{message.error('`Erreur lors du chargement des vehicules: ${error.message}`');}});// Mutation pour supprimer une vehicule\nconst{mutate:deleteVehicle}=useMutation({mutationFn:async id=>{const response=await axiosInstance.delete(`/vehicle/${id}`);return response.data;},onSuccess:()=>{message.success(\"Vehicle supprimée avec succès\");queryClient.invalidateQueries([\"vehicle\"]);// Rafraîchir les données\n},onError:error=>{message.error(`Erreur lors de la suppression: ${error.message}`);}});// Fonction pour confirmer la suppression\nconst showDeleteConfirm=id=>{Modal.confirm({title:\"Êtes-vous sûr de vouloir supprimer cette vehicule ?\",okText:\"Oui\",okType:\"danger\",cancelText:\"Non\",onOk(){deleteVehicle(id);// Appeler la mutation de suppression\n}});};// Fonction pour afficher les détails d'une livraison\nconst handleViewVehicle=record=>{setSelectedVehicle(record);// Stocker les données de la livraison sélectionnée\nsetOpenView(true);// Ouvrir la modal\n};const columns=[{title:'Serie',dataIndex:'serie',key:'serie'},{title:'Actions',key:'actions',render:(text,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(EyeOutlined,{style:{fontSize:'18px',cursor:'pointer'},onClick:()=>handleViewVehicle(record)// Fonction d'affichage\n}),/*#__PURE__*/_jsx(EditOutlined,{style:{fontSize:'18px',cursor:'pointer'},onClick:()=>{setOpenUpdate(true);// Ouvrir la modal de mise à jour\nsetId(record._id);// Définir l'ID de l'élément à mettre à jour\n}}),/*#__PURE__*/_jsx(DeleteOutlined,{style:{fontSize:'18px',cursor:'pointer'},onClick:()=>showDeleteConfirm(record._id)// Fonction de suppression\n})]})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"20px\",textAlign:\"right\"},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>setOpen(true),style:{padding:\"10px 20px\",fontSize:\"15px\",height:\"40px\",width:\"160px\",backgroundColor:\"rgb(189, 37, 27)\",borderColor:\"rgb(189, 37, 27)\"},children:\"Add Vehicle\"})}),/*#__PURE__*/_jsx(Table,{dataSource:data,columns:columns,rowKey:\"_id\",loading:isLoading}),/*#__PURE__*/_jsx(AddVehicle,{open:open,setOpen:setOpen}),/*#__PURE__*/_jsx(UpdateVehicle,{openUpdate:openUpdate,setOpenUpdate:setOpenUpdate,id:id}),/*#__PURE__*/_jsx(Modal,{open:openView,onCancel:()=>setOpenView(false),footer:null// Pas de boutons dans le footer\n,children:selectedVehicle&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Serie:\"}),\" \",selectedVehicle.serie]})})})]});};export default Vehicle;","map":{"version":3,"names":["useQuery","useMutation","useQueryClient","React","useState","EditOutlined","DeleteOutlined","EyeOutlined","Table","message","Button","Modal","axiosInstance","AddVehicle","UpdateVehicle","jsx","_jsx","jsxs","_jsxs","Vehicle","open","setOpen","openUpdate","setOpenUpdate","openView","setOpenView","id","setId","selectedVehicle","setSelectedVehicle","queryClient","data","isLoading","queryKey","queryFn","response","get","onError","error","mutate","deleteVehicle","mutationFn","delete","onSuccess","success","invalidateQueries","showDeleteConfirm","confirm","title","okText","okType","cancelText","onOk","handleViewVehicle","record","columns","dataIndex","key","render","text","style","display","gap","children","fontSize","cursor","onClick","_id","marginBottom","textAlign","type","padding","height","width","backgroundColor","borderColor","dataSource","rowKey","loading","onCancel","footer","serie"],"sources":["C:/Users/Hp/Desktop/LIVRAISON/client/src/pages/vehicle/listVehicle.jsx"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport React, { useState } from 'react';\r\nimport { EditOutlined, DeleteOutlined, EyeOutlined } from '@ant-design/icons';\r\nimport { Table, message, Button, Modal } from 'antd';\r\nimport { axiosInstance } from \"../../lib/axios\";\r\nimport AddVehicle from \"./addVehicle\";\r\nimport UpdateVehicle from './updateVehicle';\r\n\r\n\r\nconst Vehicle = () => {\r\n    const [open, setOpen] = useState(false);\r\n    const [openUpdate, setOpenUpdate] = useState(false);\r\n    const [openView, setOpenView] = useState(false);\r\n    const [id, setId] = useState();\r\n    const [selectedVehicle, setSelectedVehicle] = useState(null);\r\n    const queryClient = useQueryClient();\r\n\r\n    // Récupérer les données des vehicles\r\n    const { data, isLoading } = useQuery({\r\n        queryKey: [\"vehicle\"],\r\n        queryFn: async () => {\r\n            const response = await axiosInstance.get(\"/vehicle\");\r\n            return response.data;\r\n        },\r\n        onError: (error) => {\r\n            message.error('`Erreur lors du chargement des vehicules: ${error.message}`')\r\n        },\r\n    });\r\n    // Mutation pour supprimer une vehicule\r\n    const { mutate: deleteVehicle } = useMutation({\r\n        mutationFn: async (id) => {\r\n            const response = await axiosInstance.delete(`/vehicle/${id}`);\r\n            return response.data;\r\n        },\r\n        onSuccess: () => {\r\n            message.success(\"Vehicle supprimée avec succès\");\r\n            queryClient.invalidateQueries([\"vehicle\"]); // Rafraîchir les données\r\n        },\r\n        onError: (error) => {\r\n            message.error(`Erreur lors de la suppression: ${error.message}`);\r\n        },\r\n    });\r\n    // Fonction pour confirmer la suppression\r\n    const showDeleteConfirm = (id) => {\r\n        Modal.confirm({\r\n            title: \"Êtes-vous sûr de vouloir supprimer cette vehicule ?\",\r\n            okText: \"Oui\",\r\n            okType: \"danger\",\r\n            cancelText: \"Non\",\r\n            onOk() {\r\n                deleteVehicle(id); // Appeler la mutation de suppression\r\n            },\r\n        });\r\n    };\r\n    // Fonction pour afficher les détails d'une livraison\r\n    const handleViewVehicle = (record) => {\r\n        setSelectedVehicle(record); // Stocker les données de la livraison sélectionnée\r\n        setOpenView(true); // Ouvrir la modal\r\n    };\r\n    const columns = [\r\n        {\r\n            title: 'Serie',\r\n            dataIndex: 'serie',\r\n            key: 'serie',\r\n        },\r\n        {\r\n            title: 'Actions',\r\n            key: 'actions',\r\n            render: (text, record) => (\r\n                <div style={{ display: 'flex', gap: '10px' }}>\r\n                    <EyeOutlined\r\n                        style={{ fontSize: '18px', cursor: 'pointer' }}\r\n                        onClick={() => handleViewVehicle(record)} // Fonction d'affichage\r\n                    />\r\n                    <EditOutlined\r\n                        style={{ fontSize: '18px', cursor: 'pointer' }}\r\n                        onClick={() => {\r\n                            setOpenUpdate(true); // Ouvrir la modal de mise à jour\r\n                            setId(record._id); // Définir l'ID de l'élément à mettre à jour\r\n                        }}\r\n                    />\r\n                    <DeleteOutlined\r\n                        style={{ fontSize: '18px', cursor: 'pointer' }}\r\n                        onClick={() => showDeleteConfirm(record._id)} // Fonction de suppression\r\n                    />\r\n                </div>\r\n            ),\r\n        },\r\n    ];\r\n    return (\r\n        <div>\r\n\r\n\r\n            {/* Conteneur du bouton */}\r\n            <div style={{ marginBottom: \"20px\", textAlign: \"right\" }}>\r\n                <Button\r\n                    type=\"primary\"\r\n                    onClick={() => setOpen(true)}\r\n                    style={{\r\n                        padding: \"10px 20px\",\r\n                        fontSize: \"15px\",\r\n                        height: \"40px\",\r\n                        width: \"160px\",\r\n                        backgroundColor: \"rgb(189, 37, 27)\",\r\n                        borderColor: \"rgb(189, 37, 27)\"\r\n                    }}\r\n                >\r\n                    Add Vehicle\r\n                </Button>\r\n            </div>\r\n\r\n\r\n            <Table\r\n                dataSource={data}\r\n                columns={columns}\r\n                rowKey=\"_id\"\r\n                loading={isLoading}\r\n            />\r\n\r\n            <AddVehicle open={open} setOpen={setOpen} />\r\n            <UpdateVehicle openUpdate={openUpdate} setOpenUpdate={setOpenUpdate} id={id} />\r\n\r\n            <Modal\r\n                open={openView}\r\n                onCancel={() => setOpenView(false)}\r\n                footer={null} // Pas de boutons dans le footer\r\n            >\r\n                {selectedVehicle && (\r\n                    <div>\r\n                        <p><strong>Serie:</strong> {selectedVehicle.serie}</p>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n        </div>\r\n    );\r\n\r\n\r\n\r\n};\r\nexport default Vehicle;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}