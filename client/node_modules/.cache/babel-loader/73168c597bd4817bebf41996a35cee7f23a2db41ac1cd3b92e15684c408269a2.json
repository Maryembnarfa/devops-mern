{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Desktop\\\\LIVRAISON\\\\client\\\\src\\\\pages\\\\vehicle\\\\updateVehicle.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Form, Input, Modal, Button, message } from \"antd\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { axiosInstance } from \"../../lib/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UpdateVehicle({\n  openUpdate,\n  setOpenUpdate,\n  id\n}) {\n  _s();\n  const [form] = Form.useForm();\n  const queryClient = useQueryClient();\n\n  // Requête pour récupérer les données du produit\n  const {\n    data,\n    isLoading\n  } = useQuery({\n    queryKey: [\"vehicle\", id],\n    queryFn: async () => {\n      const response = await axiosInstance.get(`/vehicle/${id}`);\n      form.setFieldsValue(response.data); // Pré-remplir le formulaire\n      return response.data;\n    },\n    enabled: !!id // N'exécute la requête que si un ID est défini\n  });\n\n  // Mutation pour mettre à jour les données\n  const mutation = useMutation({\n    mutationFn: async values => {\n      return await axiosInstance.put(`/vehicle/${id}`, values);\n    },\n    onSuccess: () => {\n      message.success(\"vehicle mis à jour avec succès !\");\n      queryClient.invalidateQueries([\"vehicle\"]); // Invalider le cache pour recharger les données\n      setOpenUpdate(false); // Fermer le modal\n    },\n    onError: () => {\n      message.error(\"Échec de la mise à jour du vehicle !\");\n    }\n  });\n\n  // Soumettre les données mises à jour\n  const handleUpdate = async () => {\n    try {\n      const values = await form.validateFields(); // Valider les champs du formulaire\n      mutation.mutate(values); // Appeler la mutation\n    } catch (error) {\n      console.log(\"Validation failed:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: openUpdate,\n    onCancel: () => {\n      setOpenUpdate(false);\n      form.resetFields(); // Réinitialiser le formulaire\n    },\n    onOk: () => form.submit() // Soumettre le formulaire lors du clic sur OK\n    ,\n    confirmLoading: isLoading || mutation.isLoading // Afficher un indicateur de chargement\n    ,\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      name: \"update vehicle\",\n      onFinish: handleUpdate // Déclencher handleSubmit à la soumission\n      ,\n      children: /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Serie\",\n        name: \"serie\",\n        rules: [{\n          required: true\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(UpdateVehicle, \"d4Ivc11uNqgXczkLgndBek8fP/0=\", false, function () {\n  return [Form.useForm, useQueryClient, useQuery, useMutation];\n});\n_c = UpdateVehicle;\nvar _c;\n$RefreshReg$(_c, \"UpdateVehicle\");","map":{"version":3,"names":["React","Form","Input","Modal","Button","message","useQuery","useMutation","useQueryClient","axiosInstance","jsxDEV","_jsxDEV","UpdateVehicle","openUpdate","setOpenUpdate","id","_s","form","useForm","queryClient","data","isLoading","queryKey","queryFn","response","get","setFieldsValue","enabled","mutation","mutationFn","values","put","onSuccess","success","invalidateQueries","onError","error","handleUpdate","validateFields","mutate","console","log","open","onCancel","resetFields","onOk","submit","confirmLoading","children","name","onFinish","Item","label","rules","required","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Hp/Desktop/LIVRAISON/client/src/pages/vehicle/updateVehicle.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Form, Input, Modal, Button, message } from \"antd\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { axiosInstance } from \"../../lib/axios\";\r\n\r\nexport default function UpdateVehicle({ openUpdate, setOpenUpdate, id }) {\r\n    const [form] = Form.useForm();\r\n    const queryClient = useQueryClient();\r\n\r\n    // Requête pour récupérer les données du produit\r\n    const { data, isLoading } = useQuery({\r\n        queryKey: [\"vehicle\", id],\r\n        queryFn: async () => {\r\n            const response = await axiosInstance.get(`/vehicle/${id}`);\r\n            form.setFieldsValue(response.data); // Pré-remplir le formulaire\r\n            return response.data;\r\n        },\r\n        enabled: !!id, // N'exécute la requête que si un ID est défini\r\n    });\r\n\r\n    // Mutation pour mettre à jour les données\r\n    const mutation = useMutation({\r\n        mutationFn: async (values) => {\r\n            return await axiosInstance.put(`/vehicle/${id}`, values);\r\n        },\r\n        onSuccess: () => {\r\n            message.success(\"vehicle mis à jour avec succès !\");\r\n            queryClient.invalidateQueries([\"vehicle\"]); // Invalider le cache pour recharger les données\r\n            setOpenUpdate(false); // Fermer le modal\r\n        },\r\n        onError: () => {\r\n            message.error(\"Échec de la mise à jour du vehicle !\");\r\n        },\r\n    });\r\n\r\n    // Soumettre les données mises à jour\r\n    const handleUpdate = async () => {\r\n        try {\r\n            const values = await form.validateFields(); // Valider les champs du formulaire\r\n            mutation.mutate(values); // Appeler la mutation\r\n        } catch (error) {\r\n            console.log(\"Validation failed:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            open={openUpdate}\r\n            onCancel={() => {\r\n                setOpenUpdate(false);\r\n                form.resetFields(); // Réinitialiser le formulaire\r\n            }}\r\n            onOk={() => form.submit()} // Soumettre le formulaire lors du clic sur OK\r\n            confirmLoading={isLoading || mutation.isLoading} // Afficher un indicateur de chargement\r\n        >\r\n            <Form\r\n                form={form}\r\n                name=\"update vehicle\"\r\n                onFinish={handleUpdate} // Déclencher handleSubmit à la soumission\r\n            >\r\n                <Form.Item label=\"Serie\" name=\"serie\" rules={[{ required: true }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n\r\n\r\n\r\n\r\n            </Form>\r\n        </Modal>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EAAEC,OAAO,QAAQ,MAAM;AAC1D,SAASC,QAAQ,EAAEC,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AAC7E,SAASC,aAAa,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,eAAe,SAASC,aAAaA,CAAC;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAG,CAAC,EAAE;EAAAC,EAAA;EACrE,MAAM,CAACC,IAAI,CAAC,GAAGhB,IAAI,CAACiB,OAAO,CAAC,CAAC;EAC7B,MAAMC,WAAW,GAAGX,cAAc,CAAC,CAAC;;EAEpC;EACA,MAAM;IAAEY,IAAI;IAAEC;EAAU,CAAC,GAAGf,QAAQ,CAAC;IACjCgB,QAAQ,EAAE,CAAC,SAAS,EAAEP,EAAE,CAAC;IACzBQ,OAAO,EAAE,MAAAA,CAAA,KAAY;MACjB,MAAMC,QAAQ,GAAG,MAAMf,aAAa,CAACgB,GAAG,CAAC,YAAYV,EAAE,EAAE,CAAC;MAC1DE,IAAI,CAACS,cAAc,CAACF,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC;MACpC,OAAOI,QAAQ,CAACJ,IAAI;IACxB,CAAC;IACDO,OAAO,EAAE,CAAC,CAACZ,EAAE,CAAE;EACnB,CAAC,CAAC;;EAEF;EACA,MAAMa,QAAQ,GAAGrB,WAAW,CAAC;IACzBsB,UAAU,EAAE,MAAOC,MAAM,IAAK;MAC1B,OAAO,MAAMrB,aAAa,CAACsB,GAAG,CAAC,YAAYhB,EAAE,EAAE,EAAEe,MAAM,CAAC;IAC5D,CAAC;IACDE,SAAS,EAAEA,CAAA,KAAM;MACb3B,OAAO,CAAC4B,OAAO,CAAC,kCAAkC,CAAC;MACnDd,WAAW,CAACe,iBAAiB,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;MAC5CpB,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IAC1B,CAAC;IACDqB,OAAO,EAAEA,CAAA,KAAM;MACX9B,OAAO,CAAC+B,KAAK,CAAC,sCAAsC,CAAC;IACzD;EACJ,CAAC,CAAC;;EAEF;EACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACA,MAAMP,MAAM,GAAG,MAAMb,IAAI,CAACqB,cAAc,CAAC,CAAC,CAAC,CAAC;MAC5CV,QAAQ,CAACW,MAAM,CAACT,MAAM,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZI,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEL,KAAK,CAAC;IAC5C;EACJ,CAAC;EAED,oBACIzB,OAAA,CAACR,KAAK;IACFuC,IAAI,EAAE7B,UAAW;IACjB8B,QAAQ,EAAEA,CAAA,KAAM;MACZ7B,aAAa,CAAC,KAAK,CAAC;MACpBG,IAAI,CAAC2B,WAAW,CAAC,CAAC,CAAC,CAAC;IACxB,CAAE;IACFC,IAAI,EAAEA,CAAA,KAAM5B,IAAI,CAAC6B,MAAM,CAAC,CAAE,CAAC;IAAA;IAC3BC,cAAc,EAAE1B,SAAS,IAAIO,QAAQ,CAACP,SAAU,CAAC;IAAA;IAAA2B,QAAA,eAEjDrC,OAAA,CAACV,IAAI;MACDgB,IAAI,EAAEA,IAAK;MACXgC,IAAI,EAAC,gBAAgB;MACrBC,QAAQ,EAAEb,YAAa,CAAC;MAAA;MAAAW,QAAA,eAExBrC,OAAA,CAACV,IAAI,CAACkD,IAAI;QAACC,KAAK,EAAC,OAAO;QAACH,IAAI,EAAC,OAAO;QAACI,KAAK,EAAE,CAAC;UAAEC,QAAQ,EAAE;QAAK,CAAC,CAAE;QAAAN,QAAA,eAC9DrC,OAAA,CAACT,KAAK;UAAAqD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAKV;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEhB;AAAC1C,EAAA,CAjEuBJ,aAAa;EAAA,QAClBX,IAAI,CAACiB,OAAO,EACPV,cAAc,EAGNF,QAAQ,EAWnBC,WAAW;AAAA;AAAAoD,EAAA,GAhBR/C,aAAa;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}