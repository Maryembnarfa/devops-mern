{"ast":null,"code":"function internGet(_ref, value) {\n  let {\n    map,\n    initKey\n  } = _ref;\n  const key = initKey(value);\n  return map.has(key) ? map.get(key) : value;\n}\nfunction internSet(_ref2, value) {\n  let {\n    map,\n    initKey\n  } = _ref2;\n  const key = initKey(value);\n  if (map.has(key)) return map.get(key);\n  map.set(key, value);\n  return value;\n}\nfunction internDelete(_ref3, value) {\n  let {\n    map,\n    initKey\n  } = _ref3;\n  const key = initKey(value);\n  if (map.has(key)) {\n    value = map.get(key);\n    map.delete(key);\n  }\n  return value;\n}\nfunction keyof(value) {\n  return typeof value === 'object' ? value.valueOf() : value;\n}\n/**\n * @see 参考 https://github.com/mbostock/internmap/blob/main/src/index.js\n */\nexport class InternMap extends Map {\n  constructor(entries) {\n    super();\n    this.map = new Map();\n    this.initKey = keyof;\n    if (entries !== null) {\n      for (const [key, value] of entries) {\n        this.set(key, value);\n      }\n    }\n  }\n  get(key) {\n    return super.get(internGet({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n  has(key) {\n    return super.has(internGet({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n  set(key, value) {\n    return super.set(internSet({\n      map: this.map,\n      initKey: this.initKey\n    }, key), value);\n  }\n  delete(key) {\n    return super.delete(internDelete({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n}","map":{"version":3,"names":["internGet","_ref","value","map","initKey","key","has","get","internSet","_ref2","set","internDelete","_ref3","delete","keyof","valueOf","InternMap","Map","constructor","entries"],"sources":["utils/internMap.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,SAASA,CAAAC,IAAA,EAAmBC,KAAK;EAAA,IAAvB;IAAEC,GAAG;IAAEC;EAAO,CAAE,GAAAH,IAAA;EACjC,MAAMI,GAAG,GAAGD,OAAO,CAACF,KAAK,CAAC;EAC1B,OAAOC,GAAG,CAACG,GAAG,CAACD,GAAG,CAAC,GAAGF,GAAG,CAACI,GAAG,CAACF,GAAG,CAAC,GAAGH,KAAK;AAC5C;AAEA,SAASM,SAASA,CAAAC,KAAA,EAAmBP,KAAK;EAAA,IAAvB;IAAEC,GAAG;IAAEC;EAAO,CAAE,GAAAK,KAAA;EACjC,MAAMJ,GAAG,GAAGD,OAAO,CAACF,KAAK,CAAC;EAC1B,IAAIC,GAAG,CAACG,GAAG,CAACD,GAAG,CAAC,EAAE,OAAOF,GAAG,CAACI,GAAG,CAACF,GAAG,CAAC;EACrCF,GAAG,CAACO,GAAG,CAACL,GAAG,EAAEH,KAAK,CAAC;EACnB,OAAOA,KAAK;AACd;AAEA,SAASS,YAAYA,CAAAC,KAAA,EAAmBV,KAAK;EAAA,IAAvB;IAAEC,GAAG;IAAEC;EAAO,CAAE,GAAAQ,KAAA;EACpC,MAAMP,GAAG,GAAGD,OAAO,CAACF,KAAK,CAAC;EAC1B,IAAIC,GAAG,CAACG,GAAG,CAACD,GAAG,CAAC,EAAE;IAChBH,KAAK,GAAGC,GAAG,CAACI,GAAG,CAACF,GAAG,CAAC;IACpBF,GAAG,CAACU,MAAM,CAACR,GAAG,CAAC;;EAEjB,OAAOH,KAAK;AACd;AAEA,SAASY,KAAKA,CAACZ,KAAK;EAClB,OAAO,OAAOA,KAAK,KAAK,QAAQ,GAAGA,KAAK,CAACa,OAAO,EAAE,GAAGb,KAAK;AAC5D;AAEA;;;AAGA,OAAM,MAAOc,SAAgB,SAAQC,GAAG;EAKtCC,YAAYC,OAAO;IACjB,KAAK,EAAE;IALD,KAAAhB,GAAG,GAAG,IAAIc,GAAG,EAAQ;IAErB,KAAAb,OAAO,GAAGU,KAAK;IAIrB,IAAIK,OAAO,KAAK,IAAI,EAAE;MACpB,KAAK,MAAM,CAACd,GAAG,EAAEH,KAAK,CAAC,IAAIiB,OAAO,EAAE;QAClC,IAAI,CAACT,GAAG,CAACL,GAAG,EAAEH,KAAK,CAAC;;;EAG1B;EAEAK,GAAGA,CAACF,GAAM;IACR,OAAO,KAAK,CAACE,GAAG,CAACP,SAAS,CAAC;MAAEG,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEC,GAAG,CAAC,CAAC;EAC5E;EAEAC,GAAGA,CAACD,GAAM;IACR,OAAO,KAAK,CAACC,GAAG,CAACN,SAAS,CAAC;MAAEG,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEC,GAAG,CAAC,CAAC;EAC5E;EAEAK,GAAGA,CAACL,GAAM,EAAEH,KAAQ;IAClB,OAAO,KAAK,CAACQ,GAAG,CAACF,SAAS,CAAC;MAAEL,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEC,GAAG,CAAC,EAAEH,KAAK,CAAC;EACnF;EAEAW,MAAMA,CAACR,GAAM;IACX,OAAO,KAAK,CAACQ,MAAM,CAACF,YAAY,CAAC;MAAER,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEC,GAAG,CAAC,CAAC;EAClF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}