{"ast":null,"code":"// 参考 d3-ticks nice 的实现\n// https://github.com/d3/d3-scale\nimport { tickIncrement } from './ticks';\nexport const d3LinearNice = function (min, max) {\n  let count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  const d = [min, max];\n  let i0 = 0;\n  let i1 = d.length - 1;\n  let start = d[i0];\n  let stop = d[i1];\n  let step;\n  if (stop < start) {\n    [start, stop] = [stop, start];\n    [i0, i1] = [i1, i0];\n  }\n  step = tickIncrement(start, stop, count);\n  if (step > 0) {\n    start = Math.floor(start / step) * step;\n    stop = Math.ceil(stop / step) * step;\n    step = tickIncrement(start, stop, count);\n  } else if (step < 0) {\n    start = Math.ceil(start * step) / step;\n    stop = Math.floor(stop * step) / step;\n    step = tickIncrement(start, stop, count);\n  }\n  if (step > 0) {\n    d[i0] = Math.floor(start / step) * step;\n    d[i1] = Math.ceil(stop / step) * step;\n  } else if (step < 0) {\n    d[i0] = Math.ceil(start * step) / step;\n    d[i1] = Math.floor(stop * step) / step;\n  }\n  return d;\n};","map":{"version":3,"names":["tickIncrement","d3LinearNice","min","max","count","arguments","length","undefined","d","i0","i1","start","stop","step","Math","floor","ceil"],"sources":["utils/d3-linear-nice.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA;AAEA,SAASA,aAAa,QAAQ,SAAS;AAGvC,OAAO,MAAMC,YAAY,GAAe,SAAAA,CAACC,GAAW,EAAEC,GAAW,EAAuB;EAAA,IAArBC,KAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAgB,CAAC;EAClF,MAAMG,CAAC,GAAG,CAACN,GAAG,EAAEC,GAAG,CAAC;EACpB,IAAIM,EAAE,GAAG,CAAC;EACV,IAAIC,EAAE,GAAGF,CAAC,CAACF,MAAM,GAAG,CAAC;EACrB,IAAIK,KAAK,GAAGH,CAAC,CAACC,EAAE,CAAC;EACjB,IAAIG,IAAI,GAAGJ,CAAC,CAACE,EAAE,CAAC;EAChB,IAAIG,IAAI;EAER,IAAID,IAAI,GAAGD,KAAK,EAAE;IAChB,CAACA,KAAK,EAAEC,IAAI,CAAC,GAAG,CAACA,IAAI,EAAED,KAAK,CAAC;IAC7B,CAACF,EAAE,EAAEC,EAAE,CAAC,GAAG,CAACA,EAAE,EAAED,EAAE,CAAC;;EAErBI,IAAI,GAAGb,aAAa,CAACW,KAAK,EAAEC,IAAI,EAAER,KAAK,CAAC;EAExC,IAAIS,IAAI,GAAG,CAAC,EAAE;IACZF,KAAK,GAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACvCD,IAAI,GAAGE,IAAI,CAACE,IAAI,CAACJ,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;IACpCA,IAAI,GAAGb,aAAa,CAACW,KAAK,EAAEC,IAAI,EAAER,KAAK,CAAC;GACzC,MAAM,IAAIS,IAAI,GAAG,CAAC,EAAE;IACnBF,KAAK,GAAGG,IAAI,CAACE,IAAI,CAACL,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACtCD,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;IACrCA,IAAI,GAAGb,aAAa,CAACW,KAAK,EAAEC,IAAI,EAAER,KAAK,CAAC;;EAG1C,IAAIS,IAAI,GAAG,CAAC,EAAE;IACZL,CAAC,CAACC,EAAE,CAAC,GAAGK,IAAI,CAACC,KAAK,CAACJ,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACvCL,CAAC,CAACE,EAAE,CAAC,GAAGI,IAAI,CAACE,IAAI,CAACJ,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;GACtC,MAAM,IAAIA,IAAI,GAAG,CAAC,EAAE;IACnBL,CAAC,CAACC,EAAE,CAAC,GAAGK,IAAI,CAACE,IAAI,CAACL,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACtCL,CAAC,CAACE,EAAE,CAAC,GAAGI,IAAI,CAACC,KAAK,CAACH,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;;EAExC,OAAOL,CAAC;AACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}