{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Text, Group, Circle, Path } from '@antv/g';\nimport { deepMix, isUndefined, find, get } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { selectPlotArea, getPointsR, getPointsPath, getElements, getThetaPath } from './utils';\nconst DEFAULT_STYLE = {\n  pointR: 6,\n  pointStrokeWidth: 1,\n  pointStroke: '#888',\n  pointActiveStroke: '#f5f5f5',\n  pathStroke: '#888',\n  pathLineDash: [3, 4],\n  labelFontSize: 12,\n  labelFill: '#888',\n  labelStroke: '#fff',\n  labelLineWidth: 1,\n  labelY: -6,\n  labelX: 2\n};\n// point shape name.\nconst MOVE_POINT_NAME = 'movePoint';\n// Element mouseenter change style.\nconst elementMouseenter = e => {\n  const element = e.target;\n  const {\n    markType\n  } = element;\n  // Mark line.\n  if (markType === 'line') {\n    element.attr('_lineWidth', element.attr('lineWidth') || 1);\n    element.attr('lineWidth', element.attr('_lineWidth') + 3);\n  }\n  // Mark interval.\n  if (markType === 'interval') {\n    element.attr('_opacity', element.attr('opacity') || 1);\n    element.attr('opacity', 0.7 * element.attr('_opacity'));\n  }\n};\n// Element mouseleave change style.\nconst elementMouseleave = e => {\n  const element = e.target;\n  const {\n    markType\n  } = element;\n  // Mark line.\n  if (markType === 'line') {\n    element.attr('lineWidth', element.attr('_lineWidth'));\n  }\n  // Mark interval.\n  if (markType === 'interval') {\n    element.attr('opacity', element.attr('_opacity'));\n  }\n};\n// Get the latest overall data based on the individual data changes.\nconst getNewData = (newChangeData, data, encode) => {\n  return data.map(d => {\n    const isUpdate = ['x', 'color'].reduce((v, key) => {\n      const field = encode[key];\n      if (!field) return v;\n      if (d[field] !== newChangeData[field]) return false;\n      return v;\n    }, true);\n    return isUpdate ? Object.assign(Object.assign({}, d), newChangeData) : d;\n  });\n};\n// Find mark interval origin element data.\nconst getIntervalDataRatioTransformFn = element => {\n  const y = get(element, ['__data__', 'y']);\n  const y1 = get(element, ['__data__', 'y1']);\n  const v = y1 - y;\n  const {\n    __data__: {\n      data,\n      encode,\n      transform\n    },\n    childNodes\n  } = element.parentNode;\n  const isNormalizeY = find(transform, _ref => {\n    let {\n      type\n    } = _ref;\n    return type === 'normalizeY';\n  });\n  const yField = get(encode, ['y', 'field']);\n  const value = data[childNodes.indexOf(element)][yField];\n  return function (newValue) {\n    let isTheta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (isNormalizeY || isTheta) {\n      return newValue / (1 - newValue) / (v / (1 - v)) * value;\n    }\n    return newValue;\n  };\n};\n// Find origin path data.\nconst getPathDataRatioTransformFn = (element, index) => {\n  const v = get(element, ['__data__', 'seriesItems', index, '0', 'value']);\n  const i = get(element, ['__data__', 'seriesIndex', index]);\n  const {\n    __data__: {\n      data,\n      encode,\n      transform\n    }\n  } = element.parentNode;\n  const isNormalizeY = find(transform, _ref2 => {\n    let {\n      type\n    } = _ref2;\n    return type === 'normalizeY';\n  });\n  const yField = get(encode, ['y', 'field']);\n  const value = data[i][yField];\n  return newValue => {\n    if (isNormalizeY) {\n      if (v === 1) {\n        return newValue;\n      }\n      return newValue / (1 - newValue) / (v / (1 - v)) * value;\n    }\n    return newValue;\n  };\n};\n// Point shape select change style.\nconst selectedPointsStyle = (pointsShape, selection, defaultStyle) => {\n  pointsShape.forEach((shape, index) => {\n    shape.attr('stroke', selection[1] === index ? defaultStyle['activeStroke'] : defaultStyle['stroke']);\n  });\n};\n// Create help show message shape.\nconst createHelpShape = (group, circle, pathStyle, labelStyle) => {\n  const pathShape = new Path({\n    style: pathStyle\n  });\n  const labelShape = new Text({\n    style: labelStyle\n  });\n  circle.appendChild(labelShape);\n  group.appendChild(pathShape);\n  return [pathShape, labelShape];\n};\n// Get color scale type.\nconst getColorType = (scaleColor, color) => {\n  const indexOf = get(scaleColor, ['options', 'range', 'indexOf']);\n  if (!indexOf) return;\n  const i = scaleColor.options.range.indexOf(color);\n  return scaleColor.sortedDomain[i];\n};\n// Get the same direction new point.\nconst getSamePointPosition = (center, point, target) => {\n  const oldR = getPointsR(center, point);\n  const newR = getPointsR(center, target);\n  const ratio = newR / oldR;\n  const newX = center[0] + (point[0] - center[0]) * ratio;\n  const newY = center[1] + (point[1] - center[1]) * ratio;\n  return [newX, newY];\n};\n/**\n * ElementPointMove interaction.\n */\nexport function ElementPointMove() {\n  let elementPointMoveOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n      selection = [],\n      precision = 2\n    } = elementPointMoveOptions,\n    style = __rest(elementPointMoveOptions, [\"selection\", \"precision\"]);\n  const defaultStyle = Object.assign(Object.assign({}, DEFAULT_STYLE), style || {});\n  // Shape default style.\n  const pathDefaultStyle = subObject(defaultStyle, 'path');\n  const labelDefaultStyle = subObject(defaultStyle, 'label');\n  const pointDefaultStyle = subObject(defaultStyle, 'point');\n  return (context, _, emitter) => {\n    const {\n      update,\n      setState,\n      container,\n      view,\n      options: {\n        marks,\n        coordinate: coordinateOptions\n      }\n    } = context;\n    const plotArea = selectPlotArea(container);\n    let elements = getElements(plotArea);\n    let newState;\n    let newSelection = selection;\n    const {\n      transform = [],\n      type: coordinateType\n    } = coordinateOptions;\n    const isTranspose = !!find(transform, _ref3 => {\n      let {\n        type\n      } = _ref3;\n      return type === 'transpose';\n    });\n    const isPolar = coordinateType === 'polar';\n    const isTheta = coordinateType === 'theta';\n    const isArea = !!find(elements, _ref4 => {\n      let {\n        markType\n      } = _ref4;\n      return markType === 'area';\n    });\n    if (isArea) {\n      elements = elements.filter(_ref5 => {\n        let {\n          markType\n        } = _ref5;\n        return markType === 'area';\n      });\n    }\n    // Create points\n    const pointsGroup = new Group({\n      style: {\n        // Tooltip point need down.\n        zIndex: 2\n      }\n    });\n    plotArea.appendChild(pointsGroup);\n    const selectedChange = () => {\n      emitter.emit('element-point:select', {\n        nativeEvent: true,\n        data: {\n          selection: newSelection\n        }\n      });\n    };\n    const dataChange = (changeData, data) => {\n      emitter.emit('element-point:moved', {\n        nativeEvent: true,\n        data: {\n          changeData,\n          data\n        }\n      });\n    };\n    // Element click change style.\n    const elementClick = e => {\n      const element = e.target;\n      newSelection = [element.parentNode.childNodes.indexOf(element)];\n      selectedChange();\n      createPoints(element);\n    };\n    const elementSelect = d => {\n      const {\n        data: {\n          selection\n        },\n        nativeEvent\n      } = d;\n      if (nativeEvent) return;\n      newSelection = selection;\n      const element = get(elements, [newSelection === null || newSelection === void 0 ? void 0 : newSelection[0]]);\n      if (element) {\n        createPoints(element);\n      }\n    };\n    // Create select element points.\n    const createPoints = element => {\n      const {\n        attributes,\n        markType,\n        __data__: data\n      } = element;\n      const {\n        stroke: fill\n      } = attributes;\n      const {\n        points,\n        seriesTitle,\n        color,\n        title,\n        seriesX,\n        y1\n      } = data;\n      // Transpose Currently only do mark interval;\n      if (isTranspose && markType !== 'interval') return;\n      const {\n        scale,\n        coordinate\n      } = (newState === null || newState === void 0 ? void 0 : newState.view) || view;\n      const {\n        color: scaleColor,\n        y: scaleY,\n        x: scaleX\n      } = scale;\n      const center = coordinate.getCenter();\n      pointsGroup.removeChildren();\n      let downPoint;\n      const updateView = (x, y, color, markTypes) => __awaiter(this, void 0, void 0, function* () {\n        setState('elementPointMove', viewOptions => {\n          var _a;\n          // Update marks.\n          const newMarks = (((_a = newState === null || newState === void 0 ? void 0 : newState.options) === null || _a === void 0 ? void 0 : _a.marks) || marks).map(mark => {\n            if (!markTypes.includes(mark.type)) return mark;\n            const {\n              data,\n              encode\n            } = mark;\n            const encodeKeys = Object.keys(encode);\n            // Get change new one element data.\n            const newChangeData = encodeKeys.reduce((value, key) => {\n              const dataKey = encode[key];\n              if (key === 'x') {\n                value[dataKey] = x;\n              }\n              if (key === 'y') {\n                value[dataKey] = y;\n              }\n              if (key === 'color') {\n                value[dataKey] = color;\n              }\n              return value;\n            }, {});\n            // Get change new all data.\n            const newData = getNewData(newChangeData, data, encode);\n            dataChange(newChangeData, newData);\n            return deepMix({}, mark, {\n              data: newData,\n              // No need animate\n              animate: false\n            });\n          });\n          return Object.assign(Object.assign({}, viewOptions), {\n            marks: newMarks\n          });\n        });\n        return yield update('elementPointMove');\n      });\n      if (['line', 'area'].includes(markType)) {\n        points.forEach((p, index) => {\n          const title = scaleX.invert(seriesX[index]);\n          // Area points have bottom point.\n          if (!title) return;\n          const circle = new Circle({\n            name: MOVE_POINT_NAME,\n            style: Object.assign({\n              cx: p[0],\n              cy: p[1],\n              fill\n            }, pointDefaultStyle)\n          });\n          const ratioTransform = getPathDataRatioTransformFn(element, index);\n          circle.addEventListener('mousedown', e => {\n            const oldPoint = coordinate.output([seriesX[index], 0]);\n            const pathLength = seriesTitle === null || seriesTitle === void 0 ? void 0 : seriesTitle.length;\n            container.attr('cursor', 'move');\n            if (newSelection[1] !== index) {\n              newSelection[1] = index;\n              selectedChange();\n            }\n            selectedPointsStyle(pointsGroup.childNodes, newSelection, pointDefaultStyle);\n            const [pathShape, labelShape] = createHelpShape(pointsGroup, circle, pathDefaultStyle, labelDefaultStyle);\n            // Point move change text\n            const pointMousemove = e => {\n              const newCy = p[1] + e.clientY - downPoint[1];\n              // Area/Radar chart.\n              if (isArea) {\n                // Radar chart.\n                if (isPolar) {\n                  const newCx = p[0] + e.clientX - downPoint[0];\n                  const [newX, newY] = getSamePointPosition(center, oldPoint, [newCx, newCy]);\n                  const [, initY] = coordinate.output([1, scaleY.output(0)]);\n                  const [, y] = coordinate.invert([newX, initY - (points[index + pathLength][1] - newY)]);\n                  const nextIndex = (index + 1) % pathLength;\n                  const lastIndex = (index - 1 + pathLength) % pathLength;\n                  const newPath = getPointsPath([points[lastIndex], [newX, newY], seriesTitle[nextIndex] && points[nextIndex]]);\n                  labelShape.attr('text', ratioTransform(scaleY.invert(y)).toFixed(precision));\n                  pathShape.attr('d', newPath);\n                  circle.attr('cx', newX);\n                  circle.attr('cy', newY);\n                } else {\n                  // Area chart.\n                  const [, initY] = coordinate.output([1, scaleY.output(0)]);\n                  const [, y] = coordinate.invert([p[0], initY - (points[index + pathLength][1] - newCy)]);\n                  const newPath = getPointsPath([points[index - 1], [p[0], newCy], seriesTitle[index + 1] && points[index + 1]]);\n                  labelShape.attr('text', ratioTransform(scaleY.invert(y)).toFixed(precision));\n                  pathShape.attr('d', newPath);\n                  circle.attr('cy', newCy);\n                }\n              } else {\n                // Line chart.\n                const [, y] = coordinate.invert([p[0], newCy]);\n                const newPath = getPointsPath([points[index - 1], [p[0], newCy], points[index + 1]]);\n                labelShape.attr('text', scaleY.invert(y).toFixed(precision));\n                pathShape.attr('d', newPath);\n                circle.attr('cy', newCy);\n              }\n            };\n            downPoint = [e.clientX, e.clientY];\n            window.addEventListener('mousemove', pointMousemove);\n            const mouseupFn = () => __awaiter(this, void 0, void 0, function* () {\n              container.attr('cursor', 'default');\n              window.removeEventListener('mousemove', pointMousemove);\n              container.removeEventListener('mouseup', mouseupFn);\n              if (isUndefined(labelShape.attr('text'))) return;\n              const y = Number(labelShape.attr('text'));\n              const colorType = getColorType(scaleColor, color);\n              newState = yield updateView(title, y, colorType, ['line', 'area']);\n              labelShape.remove();\n              pathShape.remove();\n              createPoints(element);\n            });\n            container.addEventListener('mouseup', mouseupFn);\n          });\n          pointsGroup.appendChild(circle);\n        });\n        selectedPointsStyle(pointsGroup.childNodes, newSelection, pointDefaultStyle);\n      } else if (markType === 'interval') {\n        // Column chart point.\n        let circlePoint = [(points[0][0] + points[1][0]) / 2, points[0][1]];\n        // Bar chart point.\n        if (isTranspose) {\n          circlePoint = [points[0][0], (points[0][1] + points[1][1]) / 2];\n        } else if (isTheta) {\n          // Pie chart point.\n          circlePoint = points[0];\n        }\n        const ratioTransform = getIntervalDataRatioTransformFn(element);\n        const circle = new Circle({\n          name: MOVE_POINT_NAME,\n          style: Object.assign(Object.assign({\n            cx: circlePoint[0],\n            cy: circlePoint[1],\n            fill\n          }, pointDefaultStyle), {\n            stroke: pointDefaultStyle['activeStroke']\n          })\n        });\n        circle.addEventListener('mousedown', e => {\n          container.attr('cursor', 'move');\n          const colorType = getColorType(scaleColor, color);\n          const [pathShape, labelShape] = createHelpShape(pointsGroup, circle, pathDefaultStyle, labelDefaultStyle);\n          // Point move change text\n          const pointMousemove = e => {\n            if (isTranspose) {\n              // Bar chart.\n              const newCx = circlePoint[0] + e.clientX - downPoint[0];\n              const [initX] = coordinate.output([scaleY.output(0), scaleY.output(0)]);\n              const [, x] = coordinate.invert([initX + (newCx - points[2][0]), circlePoint[1]]);\n              const newPath = getPointsPath([[newCx, points[0][1]], [newCx, points[1][1]], points[2], points[3]], true);\n              labelShape.attr('text', ratioTransform(scaleY.invert(x)).toFixed(precision));\n              pathShape.attr('d', newPath);\n              circle.attr('cx', newCx);\n            } else if (isTheta) {\n              // Pie chart.\n              const newCy = circlePoint[1] + e.clientY - downPoint[1];\n              const newCx = circlePoint[0] + e.clientX - downPoint[0];\n              const [newXOut, newYOut] = getSamePointPosition(center, [newCx, newCy], circlePoint);\n              const [newXIn, newYIn] = getSamePointPosition(center, [newCx, newCy], points[1]);\n              const lastPercent = coordinate.invert([newXOut, newYOut])[1];\n              const percent = y1 - lastPercent;\n              if (percent < 0) return;\n              const newPath = getThetaPath(center, [[newXOut, newYOut], [newXIn, newYIn], points[2], points[3]], percent > 0.5 ? 1 : 0);\n              labelShape.attr('text', ratioTransform(percent, true).toFixed(precision));\n              pathShape.attr('d', newPath);\n              circle.attr('cx', newXOut);\n              circle.attr('cy', newYOut);\n            } else {\n              // Column chart.\n              const newCy = circlePoint[1] + e.clientY - downPoint[1];\n              const [, initY] = coordinate.output([1, scaleY.output(0)]);\n              const [, y] = coordinate.invert([circlePoint[0], initY - (points[2][1] - newCy)]);\n              const newPath = getPointsPath([[points[0][0], newCy], [points[1][0], newCy], points[2], points[3]], true);\n              labelShape.attr('text', ratioTransform(scaleY.invert(y)).toFixed(precision));\n              pathShape.attr('d', newPath);\n              circle.attr('cy', newCy);\n            }\n          };\n          downPoint = [e.clientX, e.clientY];\n          window.addEventListener('mousemove', pointMousemove);\n          // Change mosueup change data and update 、clear shape.\n          const mouseupFn = () => __awaiter(this, void 0, void 0, function* () {\n            container.attr('cursor', 'default');\n            container.removeEventListener('mouseup', mouseupFn);\n            window.removeEventListener('mousemove', pointMousemove);\n            if (isUndefined(labelShape.attr('text'))) return;\n            const y = Number(labelShape.attr('text'));\n            newState = yield updateView(title, y, colorType, [markType]);\n            labelShape.remove();\n            pathShape.remove();\n            createPoints(element);\n          });\n          container.addEventListener('mouseup', mouseupFn);\n        });\n        pointsGroup.appendChild(circle);\n      }\n    };\n    // Add EventListener.\n    elements.forEach((element, index) => {\n      if (newSelection[0] === index) {\n        createPoints(element);\n      }\n      element.addEventListener('click', elementClick);\n      element.addEventListener('mouseenter', elementMouseenter);\n      element.addEventListener('mouseleave', elementMouseleave);\n    });\n    const rootClick = e => {\n      const element = e === null || e === void 0 ? void 0 : e.target;\n      if (!element || element.name !== MOVE_POINT_NAME && !elements.includes(element)) {\n        newSelection = [];\n        selectedChange();\n        pointsGroup.removeChildren();\n      }\n    };\n    emitter.on('element-point:select', elementSelect);\n    emitter.on('element-point:unselect', rootClick);\n    container.addEventListener('mousedown', rootClick);\n    // Remove EventListener.\n    return () => {\n      pointsGroup.remove();\n      emitter.off('element-point:select', elementSelect);\n      emitter.off('element-point:unselect', rootClick);\n      container.removeEventListener('mousedown', rootClick);\n      elements.forEach(element => {\n        element.removeEventListener('click', elementClick);\n        element.removeEventListener('mouseenter', elementMouseenter);\n        element.removeEventListener('mouseleave', elementMouseleave);\n      });\n    };\n  };\n}","map":{"version":3,"names":["Text","Group","Circle","Path","deepMix","isUndefined","find","get","subObject","selectPlotArea","getPointsR","getPointsPath","getElements","getThetaPath","DEFAULT_STYLE","pointR","pointStrokeWidth","pointStroke","pointActiveStroke","pathStroke","pathLineDash","labelFontSize","labelFill","labelStroke","labelLineWidth","labelY","labelX","MOVE_POINT_NAME","elementMouseenter","e","element","target","markType","attr","elementMouseleave","getNewData","newChangeData","data","encode","map","d","isUpdate","reduce","v","key","field","Object","assign","getIntervalDataRatioTransformFn","y","y1","__data__","transform","childNodes","parentNode","isNormalizeY","_ref","type","yField","value","indexOf","newValue","isTheta","arguments","length","undefined","getPathDataRatioTransformFn","index","i","_ref2","selectedPointsStyle","pointsShape","selection","defaultStyle","forEach","shape","createHelpShape","group","circle","pathStyle","labelStyle","pathShape","style","labelShape","appendChild","getColorType","scaleColor","color","options","range","sortedDomain","getSamePointPosition","center","point","oldR","newR","ratio","newX","newY","ElementPointMove","elementPointMoveOptions","precision","__rest","pathDefaultStyle","labelDefaultStyle","pointDefaultStyle","context","_","emitter","update","setState","container","view","marks","coordinate","coordinateOptions","plotArea","elements","newState","newSelection","coordinateType","isTranspose","_ref3","isPolar","isArea","_ref4","filter","_ref5","pointsGroup","zIndex","selectedChange","emit","nativeEvent","dataChange","changeData","elementClick","createPoints","elementSelect","attributes","stroke","fill","points","seriesTitle","title","seriesX","scale","scaleY","x","scaleX","getCenter","removeChildren","downPoint","updateView","markTypes","__awaiter","viewOptions","newMarks","_a","mark","includes","encodeKeys","keys","dataKey","newData","animate","p","invert","name","cx","cy","ratioTransform","addEventListener","oldPoint","output","pathLength","pointMousemove","newCy","clientY","newCx","clientX","initY","nextIndex","lastIndex","newPath","toFixed","window","mouseupFn","removeEventListener","Number","colorType","remove","circlePoint","initX","newXOut","newYOut","newXIn","newYIn","lastPercent","percent","rootClick","on","off"],"sources":["interaction/elementPointMove.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}