{"ast":null,"code":"import { isStrictObject } from '../utils/helper';\nfunction defineValueProp(Node, name, _ref) {\n  let {\n    key = name\n  } = _ref;\n  Node.prototype[name] = function (value) {\n    if (arguments.length === 0) return this.attr(key);\n    return this.attr(key, value);\n  };\n}\nfunction defineArrayProp(Node, name, _ref2) {\n  let {\n    key = name\n  } = _ref2;\n  Node.prototype[name] = function (value) {\n    if (arguments.length === 0) return this.attr(key);\n    if (Array.isArray(value)) return this.attr(key, value);\n    const array = [...(this.attr(key) || []), value];\n    return this.attr(key, array);\n  };\n}\nfunction defineObjectProp(Node, name, _ref3) {\n  let {\n    key: k = name\n  } = _ref3;\n  Node.prototype[name] = function (key, value) {\n    if (arguments.length === 0) return this.attr(k);\n    if (arguments.length === 1 && typeof key !== 'string') {\n      return this.attr(k, key);\n    }\n    const obj = this.attr(k) || {};\n    obj[key] = arguments.length === 1 ? true : value;\n    return this.attr(k, obj);\n  };\n}\nfunction defineMixProp(Node, name, descriptor) {\n  Node.prototype[name] = function (key) {\n    if (arguments.length === 0) return this.attr(name);\n    if (Array.isArray(key)) return this.attr(name, {\n      items: key\n    });\n    if (isStrictObject(key) && (key.title !== undefined || key.items !== undefined)) {\n      return this.attr(name, key);\n    }\n    if (key === null || key === false) return this.attr(name, key);\n    const obj = this.attr(name) || {};\n    const {\n      items = []\n    } = obj;\n    items.push(key);\n    obj.items = items;\n    return this.attr(name, obj);\n  };\n}\nfunction defineNodeProp(Node, name, _ref4) {\n  let {\n    ctor\n  } = _ref4;\n  Node.prototype[name] = function (hocMark) {\n    const node = this.append(ctor);\n    if (name === 'mark') {\n      node.type = hocMark;\n    }\n    return node;\n  };\n}\nfunction defineContainerProp(Node, name, _ref5) {\n  let {\n    ctor\n  } = _ref5;\n  Node.prototype[name] = function () {\n    this.type = null;\n    return this.append(ctor);\n  };\n}\n/**\n * A decorator to define different type of attribute setter or\n * getter for current node.\n */\nexport function defineProps(descriptors) {\n  return Node => {\n    for (const [name, descriptor] of Object.entries(descriptors)) {\n      const {\n        type\n      } = descriptor;\n      if (type === 'value') defineValueProp(Node, name, descriptor);else if (type === 'array') defineArrayProp(Node, name, descriptor);else if (type === 'object') defineObjectProp(Node, name, descriptor);else if (type === 'node') defineNodeProp(Node, name, descriptor);else if (type === 'container') defineContainerProp(Node, name, descriptor);else if (type === 'mix') defineMixProp(Node, name, descriptor);\n    }\n    return Node;\n  };\n}\nexport function nodeProps(node) {\n  return Object.fromEntries(Object.entries(node).map(_ref6 => {\n    let [name, ctor] = _ref6;\n    return [name, {\n      type: 'node',\n      ctor\n    }];\n  }));\n}","map":{"version":3,"names":["isStrictObject","defineValueProp","Node","name","_ref","key","prototype","value","arguments","length","attr","defineArrayProp","_ref2","Array","isArray","array","defineObjectProp","_ref3","k","obj","defineMixProp","descriptor","items","title","undefined","push","defineNodeProp","_ref4","ctor","hocMark","node","append","type","defineContainerProp","_ref5","defineProps","descriptors","Object","entries","nodeProps","fromEntries","map","_ref6"],"sources":["api/define.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}