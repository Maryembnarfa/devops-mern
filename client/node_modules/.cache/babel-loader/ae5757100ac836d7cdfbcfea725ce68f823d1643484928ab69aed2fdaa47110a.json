{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { lowerFirst, upperFirst, isPlainObject } from '@antv/util';\nexport function identity(x) {\n  return x;\n}\n/**\n * Composes functions from left to right.\n */\nexport function compose(fns) {\n  return fns.reduce((composed, fn) => function (x) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return fn(composed(x, ...args), ...args);\n  }, identity);\n}\n/**\n * Composes single-argument async functions from left to right.\n */\nexport function composeAsync(fns) {\n  return fns.reduce((composed, fn) => x => __awaiter(this, void 0, void 0, function* () {\n    const value = yield composed(x);\n    return fn(value);\n  }), identity);\n}\nexport function capitalizeFirst(str) {\n  return str.replace(/( |^)[a-z]/g, L => L.toUpperCase());\n}\nexport function error() {\n  let message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  throw new Error(message);\n}\nexport function copyAttributes(target, source) {\n  const {\n    attributes\n  } = source;\n  const exclude = new Set(['id', 'className']);\n  for (const [key, value] of Object.entries(attributes)) {\n    if (!exclude.has(key)) {\n      target.attr(key, value);\n    }\n  }\n}\nexport function defined(x) {\n  return x !== undefined && x !== null && !Number.isNaN(x);\n}\nexport function random(a, b) {\n  return a + (b - a) * Math.random();\n}\nexport function useMemo(compute) {\n  const map = new Map();\n  return key => {\n    if (map.has(key)) return map.get(key);\n    const value = compute(key);\n    map.set(key, value);\n    return value;\n  };\n}\nexport function appendTransform(node, transform) {\n  const {\n    transform: preTransform\n  } = node.style;\n  const unset = d => d === 'none' || d === undefined;\n  const prefix = unset(preTransform) ? '' : preTransform;\n  node.style.transform = `${prefix} ${transform}`.trimStart();\n}\nexport function subObject(obj, prefix) {\n  return maybeSubObject(obj, prefix) || {};\n}\nexport function maybeSubObject(obj, prefix) {\n  const entries = Object.entries(obj || {}).filter(_ref => {\n    let [key] = _ref;\n    return key.startsWith(prefix);\n  }).map(_ref2 => {\n    let [key, value] = _ref2;\n    return [lowerFirst(key.replace(prefix, '').trim()), value];\n  }).filter(_ref3 => {\n    let [key] = _ref3;\n    return !!key;\n  });\n  return entries.length === 0 ? null : Object.fromEntries(entries);\n}\nexport function prefixObject(obj, prefix) {\n  return Object.fromEntries(Object.entries(obj).map(_ref4 => {\n    let [key, value] = _ref4;\n    return [`${prefix}${upperFirst(key)}`, value];\n  }));\n}\nexport function filterPrefixObject(obj, prefix) {\n  return Object.fromEntries(Object.entries(obj).filter(_ref5 => {\n    let [key] = _ref5;\n    return prefix.find(p => key.startsWith(p));\n  }));\n}\nexport function omitPrefixObject(obj) {\n  for (var _len2 = arguments.length, prefixes = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    prefixes[_key2 - 1] = arguments[_key2];\n  }\n  return Object.fromEntries(Object.entries(obj).filter(_ref6 => {\n    let [key] = _ref6;\n    return prefixes.every(prefix => !key.startsWith(prefix));\n  }));\n}\nexport function maybePercentage(x, size) {\n  if (x === undefined) return null;\n  if (typeof x === 'number') return x;\n  const px = +x.replace('%', '');\n  return Number.isNaN(px) ? null : px / 100 * size;\n}\nexport function isStrictObject(d) {\n  return typeof d === 'object' && !(d instanceof Date) && d !== null && !Array.isArray(d);\n}\nexport function isUnset(value) {\n  return value === null || value === false;\n}\nexport function deepAssign(dist, src) {\n  let maxLevel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  let level = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  if (level >= maxLevel) return;\n  for (const key of Object.keys(src)) {\n    const value = src[key];\n    if (!isPlainObject(value) || !isPlainObject(dist[key])) {\n      dist[key] = value;\n    } else {\n      deepAssign(dist[key], value, maxLevel, level + 1);\n    }\n  }\n  return dist;\n}","map":{"version":3,"names":["lowerFirst","upperFirst","isPlainObject","identity","x","compose","fns","reduce","composed","fn","_len","arguments","length","args","Array","_key","composeAsync","__awaiter","value","capitalizeFirst","str","replace","L","toUpperCase","error","message","undefined","Error","copyAttributes","target","source","attributes","exclude","Set","key","Object","entries","has","attr","defined","Number","isNaN","random","a","b","Math","useMemo","compute","map","Map","get","set","appendTransform","node","transform","preTransform","style","unset","d","prefix","trimStart","subObject","obj","maybeSubObject","filter","_ref","startsWith","_ref2","trim","_ref3","fromEntries","prefixObject","_ref4","filterPrefixObject","_ref5","find","p","omitPrefixObject","_len2","prefixes","_key2","_ref6","every","maybePercentage","size","px","isStrictObject","Date","isArray","isUnset","deepAssign","dist","src","maxLevel","level","keys"],"sources":["utils/helper.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}