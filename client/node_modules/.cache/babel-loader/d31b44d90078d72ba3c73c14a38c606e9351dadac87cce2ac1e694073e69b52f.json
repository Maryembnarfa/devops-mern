{"ast":null,"code":"export const DURATION_SECOND = 1000;\nexport const DURATION_MINUTE = DURATION_SECOND * 60;\nexport const DURATION_HOUR = DURATION_MINUTE * 60;\nexport const DURATION_DAY = DURATION_HOUR * 24;\nexport const DURATION_WEEK = DURATION_DAY * 7;\nexport const DURATION_MONTH = DURATION_DAY * 30;\nexport const DURATION_YEAR = DURATION_DAY * 365;\nexport function createInterval(duration, floorish, offseti, field) {\n  const adjust = (date, step) => {\n    const test = date => field(date) % step === 0;\n    let i = step;\n    while (i && !test(date)) {\n      offseti(date, -1);\n      i -= 1;\n    }\n    return date;\n  };\n  const floori = (date, step) => {\n    if (step) adjust(date, step);\n    floorish(date);\n  };\n  const floor = (date, step) => {\n    const d = new Date(+date);\n    floori(d, step);\n    return d;\n  };\n  const ceil = (date, step) => {\n    const d = new Date(+date - 1);\n    floori(d, step);\n    offseti(d, step);\n    floori(d);\n    return d;\n  };\n  const range = (start, stop, step, shouldAdjust) => {\n    const ticks = [];\n    const roundStep = Math.floor(step);\n    const t = shouldAdjust ? ceil(start, step) : ceil(start);\n    for (let i = t; i < stop; offseti(i, roundStep), floori(i)) {\n      ticks.push(new Date(+i));\n    }\n    return ticks;\n  };\n  return {\n    ceil,\n    floor,\n    range,\n    duration\n  };\n}\nexport const millisecond = createInterval(1, date => date, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setTime(+date + step);\n}, date => date.getTime());\nexport const second = createInterval(DURATION_SECOND, date => {\n  date.setMilliseconds(0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setTime(+date + DURATION_SECOND * step);\n}, date => date.getSeconds());\nexport const minute = createInterval(DURATION_MINUTE, date => {\n  date.setSeconds(0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setTime(+date + DURATION_MINUTE * step);\n}, date => date.getMinutes());\nexport const hour = createInterval(DURATION_HOUR, date => {\n  date.setMinutes(0, 0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setTime(+date + DURATION_HOUR * step);\n}, date => date.getHours());\nexport const day = createInterval(DURATION_DAY, date => {\n  date.setHours(0, 0, 0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setTime(+date + DURATION_DAY * step);\n}, date => date.getDate() - 1);\nexport const month = createInterval(DURATION_MONTH, date => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  const month = date.getMonth();\n  date.setMonth(month + step);\n}, date => date.getMonth());\nexport const week = createInterval(DURATION_WEEK, date => {\n  date.setDate(date.getDate() - date.getDay() % 7);\n  date.setHours(0, 0, 0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  date.setDate(date.getDate() + 7 * step);\n}, date => {\n  const start = month.floor(date);\n  const end = new Date(+date);\n  return Math.floor((+end - +start) / DURATION_WEEK);\n});\nexport const year = createInterval(DURATION_YEAR, date => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function (date) {\n  let step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  const year = date.getFullYear();\n  date.setFullYear(year + step);\n}, date => date.getFullYear());\nexport const localIntervalMap = {\n  millisecond,\n  second,\n  minute,\n  hour,\n  day,\n  week,\n  month,\n  year\n};","map":{"version":3,"names":["DURATION_SECOND","DURATION_MINUTE","DURATION_HOUR","DURATION_DAY","DURATION_WEEK","DURATION_MONTH","DURATION_YEAR","createInterval","duration","floorish","offseti","field","adjust","date","step","test","i","floori","floor","d","Date","ceil","range","start","stop","shouldAdjust","ticks","roundStep","Math","t","push","millisecond","arguments","length","undefined","setTime","getTime","second","setMilliseconds","getSeconds","minute","setSeconds","getMinutes","hour","setMinutes","getHours","day","setHours","getDate","month","setDate","getMonth","setMonth","week","getDay","end","year","getFullYear","setFullYear","localIntervalMap"],"sources":["utils/time-interval.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}