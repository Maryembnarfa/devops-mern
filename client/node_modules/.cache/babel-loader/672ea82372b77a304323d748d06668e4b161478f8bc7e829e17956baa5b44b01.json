{"ast":null,"code":"import flru from 'flru';\nconst cache = flru(3);\n/**\n * A decorator to return new function with LRU cache.\n */\nexport function lru(fn) {\n  let keyFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return `${arguments.length <= 0 ? undefined : arguments[0]}`;\n  };\n  let maxSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 16;\n  const cache = flru(maxSize);\n  return function () {\n    const key = keyFn(...arguments);\n    let v = cache.get(key);\n    if (cache.has(key)) return cache.get(key);\n    v = fn(...arguments);\n    cache.set(key, v);\n    return v;\n  };\n}","map":{"version":3,"names":["flru","cache","lru","fn","keyFn","arguments","length","undefined","maxSize","key","v","get","has","set"],"sources":["utils/lru.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,IAAI,MAAM,MAAM;AAEvB,MAAMC,KAAK,GAAGD,IAAI,CAAC,CAAC,CAAC;AACrB;;;AAGA,OAAM,SAAUE,GAAGA,CACjBC,EAAuB,EAEX;EAAA,IADZC,KAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAkC;IAAA,OAAa,GAAAA,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,KAAY;EAAA;EAAA,IAC3DG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAEZ,MAAMJ,KAAK,GAAGD,IAAI,CAACQ,OAAO,CAAC;EAE3B,OAAO,YAAY;IACjB,MAAMC,GAAG,GAAGL,KAAK,CAAC,GAAAC,SAAO,CAAC;IAC1B,IAAIK,CAAC,GAAGT,KAAK,CAACU,GAAG,CAACF,GAAG,CAAC;IAEtB,IAAIR,KAAK,CAACW,GAAG,CAACH,GAAG,CAAC,EAAE,OAAOR,KAAK,CAACU,GAAG,CAACF,GAAG,CAAC;IAEzCC,CAAC,GAAGP,EAAE,CAAC,GAAAE,SAAO,CAAC;IACfJ,KAAK,CAACY,GAAG,CAACJ,GAAG,EAAEC,CAAC,CAAC;IAEjB,OAAOA,CAAC;EACV,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}