{"ast":null,"code":"import { d3Ticks } from './d3-ticks';\nimport { pows, logs } from '../utils';\nexport const d3Log = function (a, b, n) {\n  let base = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n  const shouldReflect = a < 0;\n  const pow = pows(base, shouldReflect);\n  const log = logs(base, shouldReflect);\n  const r = b < a;\n  const min = r ? b : a;\n  const max = r ? a : b;\n  let i = log(min);\n  let j = log(max);\n  let ticks = [];\n  // 如果 base 是整数\n  if (!(base % 1) && j - i < n) {\n    i = Math.floor(i);\n    j = Math.ceil(j);\n    if (shouldReflect) {\n      for (; i <= j; i += 1) {\n        const p = pow(i);\n        for (let k = base - 1; k >= 1; k -= 1) {\n          const t = p * k;\n          if (t > max) break;\n          if (t >= min) ticks.push(t);\n        }\n      }\n    } else {\n      for (; i <= j; i += 1) {\n        const p = pow(i);\n        for (let k = 1; k < base; k += 1) {\n          const t = p * k;\n          if (t > max) break;\n          if (t >= min) ticks.push(t);\n        }\n      }\n    }\n    if (ticks.length * 2 < n) ticks = d3Ticks(min, max, n);\n  } else {\n    const count = n === -1 ? j - i : Math.min(j - i, n);\n    ticks = d3Ticks(i, j, count).map(pow);\n  }\n  return r ? ticks.reverse() : ticks;\n};","map":{"version":3,"names":["d3Ticks","pows","logs","d3Log","a","b","n","base","arguments","length","undefined","shouldReflect","pow","log","r","min","max","i","j","ticks","Math","floor","ceil","p","k","t","push","count","map","reverse"],"sources":["tick-methods/d3-log.ts"],"sourcesContent":[null],"mappings":"AACA,SAASA,OAAO,QAAQ,YAAY;AACpC,SAASC,IAAI,EAAEC,IAAI,QAAQ,UAAU;AAErC,OAAO,MAAMC,KAAK,GAAe,SAAAA,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAe;EAAA,IAAbC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAClD,MAAMG,aAAa,GAAGP,CAAC,GAAG,CAAC;EAC3B,MAAMQ,GAAG,GAAGX,IAAI,CAACM,IAAI,EAAEI,aAAa,CAAC;EACrC,MAAME,GAAG,GAAGX,IAAI,CAACK,IAAI,EAAEI,aAAa,CAAC;EAErC,MAAMG,CAAC,GAAGT,CAAC,GAAGD,CAAC;EACf,MAAMW,GAAG,GAAGD,CAAC,GAAGT,CAAC,GAAGD,CAAC;EACrB,MAAMY,GAAG,GAAGF,CAAC,GAAGV,CAAC,GAAGC,CAAC;EACrB,IAAIY,CAAC,GAAGJ,GAAG,CAACE,GAAG,CAAC;EAChB,IAAIG,CAAC,GAAGL,GAAG,CAACG,GAAG,CAAC;EAChB,IAAIG,KAAK,GAAG,EAAE;EAEd;EACA,IAAI,EAAEZ,IAAI,GAAG,CAAC,CAAC,IAAIW,CAAC,GAAGD,CAAC,GAAGX,CAAC,EAAE;IAC5BW,CAAC,GAAGG,IAAI,CAACC,KAAK,CAACJ,CAAC,CAAC;IACjBC,CAAC,GAAGE,IAAI,CAACE,IAAI,CAACJ,CAAC,CAAC;IAChB,IAAIP,aAAa,EAAE;MACjB,OAAOM,CAAC,IAAIC,CAAC,EAAED,CAAC,IAAI,CAAC,EAAE;QACrB,MAAMM,CAAC,GAAGX,GAAG,CAACK,CAAC,CAAC;QAChB,KAAK,IAAIO,CAAC,GAAGjB,IAAI,GAAG,CAAC,EAAEiB,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;UACrC,MAAMC,CAAC,GAAGF,CAAC,GAAGC,CAAC;UACf,IAAIC,CAAC,GAAGT,GAAG,EAAE;UACb,IAAIS,CAAC,IAAIV,GAAG,EAAEI,KAAK,CAACO,IAAI,CAACD,CAAC,CAAC;;;KAGhC,MAAM;MACL,OAAOR,CAAC,IAAIC,CAAC,EAAED,CAAC,IAAI,CAAC,EAAE;QACrB,MAAMM,CAAC,GAAGX,GAAG,CAACK,CAAC,CAAC;QAChB,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjB,IAAI,EAAEiB,CAAC,IAAI,CAAC,EAAE;UAChC,MAAMC,CAAC,GAAGF,CAAC,GAAGC,CAAC;UACf,IAAIC,CAAC,GAAGT,GAAG,EAAE;UACb,IAAIS,CAAC,IAAIV,GAAG,EAAEI,KAAK,CAACO,IAAI,CAACD,CAAC,CAAC;;;;IAIjC,IAAIN,KAAK,CAACV,MAAM,GAAG,CAAC,GAAGH,CAAC,EAAEa,KAAK,GAAGnB,OAAO,CAACe,GAAG,EAAEC,GAAG,EAAEV,CAAC,CAAC;GACvD,MAAM;IACL,MAAMqB,KAAK,GAAGrB,CAAC,KAAK,CAAC,CAAC,GAAGY,CAAC,GAAGD,CAAC,GAAGG,IAAI,CAACL,GAAG,CAACG,CAAC,GAAGD,CAAC,EAAEX,CAAC,CAAC;IACnDa,KAAK,GAAGnB,OAAO,CAACiB,CAAC,EAAEC,CAAC,EAAES,KAAK,CAAC,CAACC,GAAG,CAAChB,GAAG,CAAC;;EAGvC,OAAOE,CAAC,GAAGK,KAAK,CAACU,OAAO,EAAE,GAAGV,KAAK;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}